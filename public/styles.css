        :root {
            /* GLOBAL THEME - STRICT */
            --bg-charcoal: #121212;
            --bg-gradient: linear-gradient(180deg, #1e1e24 0%, #000000 100%);
            /* Charcoal to Black */

            /* Soft Purple / Violet Accents */
            --lavender-light: #d8b4fe;
            --lavender-main: #a78bfa;
            /* Violet-400 */
            --primary-accent: #7c3aed;
            /* Violet-600 */

            /* Text */
            --text-heading: #ffffff;
            --text-body: #9ca3af;
            /* Gray-400 */
            --text-dark: #111827;

            /* UI Elements */
            --card-glass: rgba(139, 92, 246, 0.05);
            /* Very subtle violet tint */
            --card-border: rgba(139, 92, 246, 0.15);
            --card-radius: 20px;
            /* Consistent rounding */
            --shadow-soft: 0 4px 20px rgba(0, 0, 0, 0.5);
            /* Soft shadow */

            --font-family: 'Outfit', sans-serif;
            /* Clean sans-serif */
            --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font-family);
        }

        body {
            background: var(--bg-gradient);
            color: var(--text-body);
            min-height: 100vh;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--lavender-main);
            border-radius: 10px;
        }

        /* Utility */
        .hidden {
            display: none !important;
        }

        .flex-center {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Animations */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes needleMove {
            0% {
                transform: rotate(-90deg);
            }

            100% {
                transform: rotate(45deg);
            }
        }

        /* --- Auth Styles (kept for flow) --- */
        #auth-container {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            z-index: 50;
        }

        .auth-card {
            background: rgba(30, 30, 35, 0.8);
            border: 1px solid var(--card-border);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            padding: 3rem;
            border-radius: var(--card-radius);
            width: 100%;
            max-width: 420px;
            box-shadow: var(--shadow-soft);
            position: absolute;
            transition: all 0.6s ease;
        }

        .auth-card h2 {
            color: var(--text-heading);
            margin-bottom: 0.5rem;
            font-size: 2rem;
        }

        .auth-card p {
            color: var(--text-body);
            margin-bottom: 2.5rem;
            /* Increased to prevent overlap with floating label */
            font-size: 1rem;
            line-height: 1.5;
        }

        .input-group {
            margin-bottom: 1.5rem;
            position: relative;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 1rem 1rem 1rem;
            border-radius: 12px;
            color: white;
            outline: none;
            font-size: 1rem;
            transition: all 0.3s ease;
            appearance: none;
            /* For select dropdown arrow customization if needed later */
        }

        .input-group select {
            cursor: pointer;
        }

        /* Dropdown options styling (browser dependent, but dark theme attempt) */
        .input-group select option {
            background: #1e1e24;
            color: white;
        }

        .input-group input:focus,
        .input-group select:focus {
            border-color: var(--lavender-main);
            background: rgba(255, 255, 255, 0.1);
        }

        .input-group label {
            position: absolute;
            left: 1rem;
            top: 1rem;
            color: #aaa;
            pointer-events: none;
            transition: 0.3s ease;
            font-size: 0.9rem;
            background: transparent;
            z-index: 10;
            /* Ensure label is above input */
        }

        /* Floating Label Logic */
        .input-group input:focus~label,
        .input-group input:not(:placeholder-shown)~label,
        .input-group select:focus~label,
        .input-group select:valid~label,
        .input-group input[type="date"]~label {
            top: -0.7rem;
            /* Slightly lower to keep it tight to border */
            left: 0.8rem;
            font-size: 0.75rem;
            color: var(--lavender-main);
            background: #25252b;
            padding: 0 0.5rem;
            border-radius: 4px;
        }

        .btn-primary {
            width: 100%;
            padding: 1rem;
            background: var(--lavender-main);
            color: var(--text-dark);
            border-radius: 0 12px 12px 0;
        }

        .follow-up-btn {
            background: transparent;
            border: 1px solid var(--card-border);
            color: var(--lavender-light);
            padding: 0.6rem 1.2rem;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .follow-up-btn:hover {
            background: rgba(167, 139, 250, 0.1);
            color: white;
            border-color: var(--lavender-main);
        }

        /* --- Enhanced Auth Styles --- */
        .auth-title {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, #fff 60%, #a78bfa 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .auth-subtitle {
            color: #9ca3af;
            margin-bottom: 2.5rem;
            font-size: 0.95rem;
            font-weight: 400;
        }

        .input-modern {
            height: 52px;
            font-size: 1.05rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .input-modern:focus {
            box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.1);
            border-color: var(--primary-accent);
        }

        .password-toggle {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #9ca3af;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
        }

        .password-toggle:hover {
            color: var(--lavender-main);
            background: rgba(255, 255, 255, 0.05);
        }

        .btn-login-action {
            width: 100%;
            padding: 1rem;
            background: var(--primary-accent);
            color: white;
            font-weight: 600;
            font-size: 1rem;
            border-radius: 12px;
            box-shadow: 0 4px 14px rgba(124, 58, 237, 0.4);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: none;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .btn-login-action:hover {
            background: #6d28d9;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(124, 58, 237, 0.6);
        }

        .btn-login-action:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .btn-link-secondary {
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 0.95rem;
            cursor: pointer;
            transition: color 0.2s;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            margin-top: 1rem;
        }

        .btn-link-secondary:hover {
            color: white;
            text-decoration: underline;
        }

        .btn-loader {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* HEADER ICONS & SEARCH REFINED */
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(18, 18, 18, 0.95);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--card-border);
            margin-right: 80px;
            /* Space for sidebar */
        }

        .profile-section {
            display: flex;
            align-items: center;
            gap: 1.2rem;
        }

        .header-icon {
            width: 42px;
            height: 42px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-body);
            transition: all 0.2s ease;
            background: transparent;
            position: relative;
        }

        .header-icon:hover {
            background: rgba(167, 139, 250, 0.1);
            color: var(--lavender-main);
            transform: scale(1.05);
        }

        .search-container {
            display: flex;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 24px;
            padding: 2px;
            transition: all 0.3s ease;
        }

        .search-container input {
            background: transparent;
            border: none;
            color: white;
            width: 0;
            padding: 0;
            outline: none;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            opacity: 0;
        }

        .search-container input.active {
            width: 180px;
            padding: 0 0.8rem;
            opacity: 1;
        }

        .notif-dot {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            border: 2px solid #1a1a20;
        }

        /* Sidebar Navigation - RIGHT REFINED */
        .side-nav {
            position: fixed;
            right: 0;
            top: 0;
            height: 100vh;
            width: 80px;
            background: rgba(21, 21, 26, 0.98);
            border-left: 1px solid var(--card-border);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2.5rem 0;
            gap: 1.2rem;
            z-index: 1001;
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            transition: all 0.3s ease;
        }

        .nav-item {
            width: 54px;
            height: 54px;
            border-radius: 50%;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.3, 0.45, 0.15, 1);
            color: #94a3b8;
            /* Muted gray for inactive icons */
            position: relative;
        }

        /* Active Indicator Bar (Right Edge) */
        .nav-item::before {
            content: '';
            position: absolute;
            right: -18px;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 0;
            background: var(--lavender-main);
            border-radius: 4px 0 0 4px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-item.active::before {
            height: 28px;
            right: -8px;
        }

        .nav-item svg {
            width: 24px;
            height: 24px;
            stroke: currentColor;
            stroke-width: 2;
            transition: all 0.3s ease;
        }

        /* Active State Persistence */
        .nav-item.active {
            background: var(--lavender-main);
            color: #1a1a20;
            /* High contrast dark icon */
            box-shadow: 0 10px 30px rgba(167, 139, 250, 0.3);
            transform: scale(1.05);
        }

        .nav-item.active svg {
            width: 26px;
            height: 26px;
            stroke-width: 2.5;
            /* Slightly bolder for active state */
        }

        /* Hover Behavior with Soft Purple Glow */
        .nav-item:not(.active):hover {
            background: rgba(167, 139, 250, 0.12);
            color: #f8fafc;
            transform: scale(1.08);
            box-shadow: 0 0 25px rgba(167, 139, 250, 0.15);
        }

        /* Tooltip Slide-in Labels (Appears on the right) */
        .nav-item::after {
            content: attr(data-label);
            position: absolute;
            right: 75px;
            top: 50%;
            transform: translateY(-50%) translateX(15px);
            background: #1e1e24;
            color: #f8fafc;
            padding: 0.6rem 1.2rem;
            border-radius: 10px;
            font-size: 0.85rem;
            font-weight: 600;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            border: 1px solid var(--card-border);
            box-shadow: -15px 0 40px rgba(0, 0, 0, 0.6);
            letter-spacing: 0.5px;
        }

        .nav-item:hover::after {
            opacity: 1;
            transform: translateY(-50%) translateX(0);
        }

        /* Tap/Click Feedback */
        .nav-item:active {
            transform: scale(0.94);
            transition: transform 0.1s;
        }


        /* Help Icon - Enhanced Interaction */
        .nav-item[data-label="Help & Support"] {
            position: relative;
            border-radius: 50%;
            width: 54px;
            /* Standardize size to match other icons for vertical alignment */
            height: 54px;
            margin: 0;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid transparent;
        }

        .nav-item[data-label="Help & Support"] svg {
            width: 22px;
            height: 22px;
            stroke-width: 1.8;
        }

        /* Pulsing Notification Dot (Smart Interaction) */
        .nav-item[data-label="Help & Support"]::before {
            content: '';
            position: absolute;
            top: 10px;
            right: 10px;
            width: 8px;
            height: 8px;
            background: #ef4444;
            /* Alert Red or Accent Purple? User said "thin purple indicator", standard dot is usually red or purple. Request said "Pulsing dot". */
            background: var(--primary-accent);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 10;
            pointer-events: none;
            box-shadow: 0 0 10px var(--primary-accent);
        }

        .nav-item[data-label="Help & Support"].has-notification::before {
            opacity: 1;
            animation: pulse-dot 3s ease-in-out infinite;
        }

        @keyframes pulse-dot {

            0%,
            100% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.5);
                opacity: 0.6;
            }
        }

        /* Hover Behavior */
        .nav-item[data-label="Help & Support"]:hover {
            background: rgba(21, 21, 26, 1);
            border-color: rgba(167, 139, 250, 0.3);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(167, 139, 250, 0.15);
        }

        .nav-item[data-label="Help & Support"]:hover svg {
            stroke: var(--lavender-light);
        }

        /* Active State */
        .nav-item[data-label="Help & Support"].active {
            background: rgba(167, 139, 250, 0.15);
            color: white;
            border-color: var(--lavender-main);
            box-shadow: 0 0 15px rgba(167, 139, 250, 0.2);
            transform: scale(1.05);
        }

        .nav-item[data-label="Help & Support"].active svg {
            fill: rgba(167, 139, 250, 0.1);
        }

        /* Active State Indicator (Line) & Notification Dot Handling */
        /* By default (or with notification), ::before is the Dot */
        .nav-item[data-label="Help & Support"]::before {
            /* Start as Dot properties (overriding global line) */
            width: 8px;
            height: 8px;
            top: 10px;
            right: 10px;
            background: var(--primary-accent);
            border-radius: 50%;
            transform: none;
            /* Reset global translate */
            opacity: 0;
            /* Hidden unless has-notification */
        }

        .nav-item[data-label="Help & Support"].has-notification::before {
            opacity: 1;
            animation: pulse-dot 3s ease-in-out infinite;
        }

        /* When ACTIVE, ::before becomes the Indicator Line */
        .nav-item[data-label="Help & Support"].active::before {
            /* Reset to Line properties */
            opacity: 1;
            animation: none;
            width: 4px;
            height: 20px;
            top: 50%;
            right: -8px;
            /* Align with global indicator position */
            transform: translateY(-50%);
            border-radius: 4px;
            background: var(--lavender-main);
            box-shadow: 0 0 10px rgba(167, 139, 250, 0.5);
        }

        /* Profile Item */
        .nav-item[data-label="Profile"] {
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .nav-item[data-label="Profile"].active {
            border-color: rgba(255, 255, 255, 0.2);
            background: var(--lavender-main);
        }

        /* Profile Screen Isolation */
        #profile-screen {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            padding: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        #profile-screen.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }


        .profile-header-info {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .profile-avatar-large {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            border: 4px solid var(--lavender-main);
            background: var(--bg-charcoal);
            padding: 4px;
        }

        /* Rank Comparison Card */
        .rank-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 24px;
            padding: 2rem;
            margin-top: 2rem;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }

        .rank-card-header {
            margin-bottom: 2rem;
        }

        .rank-visualization {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .rank-bar-container {
            height: 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            position: relative;
            margin: 3rem 0;
        }

        .rank-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-accent), var(--lavender-main));
            border-radius: 6px;
            width: 0%;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .rank-marker {
            position: absolute;
            top: -30px;
            transform: translateX(-50%);
            text-align: center;
        }

        .rank-marker.avg {
            top: 20px;
        }

        .marker-line {
            width: 2px;
            height: 20px;
            background: var(--lavender-main);
            margin: 0 auto;
        }

        .rank-marker.avg .marker-line {
            background: #6b7280;
        }

        .marker-text {
            font-size: 0.75rem;
            color: var(--text-heading);
            font-weight: 600;
            white-space: nowrap;
        }

        /* Mini Leaderboard */
        .mini-leaderboard {
            margin-top: 2rem;
        }

        .leaderboard-list {
            list-style: none;
        }

        .leaderboard-row {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-radius: 12px;
            margin-bottom: 0.5rem;
            transition: var(--transition);
            background: rgba(255, 255, 255, 0.02);
        }

        .leaderboard-row:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(5px);
        }

        .leaderboard-row.me {
            background: rgba(167, 139, 250, 0.1);
            border: 1px solid var(--lavender-main);
        }

        .row-rank {
            width: 40px;
            font-weight: 800;
            color: var(--lavender-light);
            font-size: 1.1rem;
        }

        .row-name {
            flex: 1;
            font-weight: 500;
            color: var(--text-heading);
        }

        .row-progress {
            width: 100px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
            margin: 0 1rem;
        }

        .progress-bar {
            height: 100%;
            background: var(--lavender-main);
        }

        .row-indicator {
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 4px;
            color: #10b981;
        }

        /* Motivation Badge */
        .motivation-badge {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #10b981;
            padding: 1rem;
            border-radius: 12px;
            margin-top: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* Modal */
        .full-leaderboard-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }

        .modal-body {
            background: var(--bg-charcoal);
            border: 1px solid var(--card-border);
            border-radius: 24px;
            width: 100%;
            max-width: 600px;
            max-height: 80vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid var(--card-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .leaderboard-filters {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.02);
        }

        .filter-btn {
            background: transparent;
            border: 1px solid var(--card-border);
            color: var(--text-body);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .filter-btn.active {
            background: var(--lavender-main);
            color: var(--text-dark);
            border-color: var(--lavender-main);
        }

        .scrollable-list {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }


        /* Main Dashboard Container (Hidden on Login) */
        #dashboard-container {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        /* Main Content Grid */
        .dashboard-workspace {
            padding: 2rem;
            max-width: 1300px;
            margin: 0 auto;
            min-height: calc(100vh - 100px);
            position: relative;
            display: block;
        }

        #home-screen.active {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            align-items: stretch;
        }

        .full-width-card {
            grid-column: 1 / -1;
        }

        /* Empty state styling */
        .empty-state {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 300px;
            color: var(--text-body);
            text-align: center;
            opacity: 0.6;
            animation: fadeIn 1s ease;
        }


        /* Generic Card Style */
        .dashboard-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: var(--card-radius);
            padding: 1.5rem;
            box-shadow: var(--shadow-soft);
            transition: var(--transition);
            opacity: 0;
            /* For scroll animation */
            transform: translateY(20px);
        }

        .dashboard-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .dashboard-card:hover {
            border-color: var(--lavender-main);
            transform: translateY(-5px);
        }

        .card-title {
            color: var(--text-heading);
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* 1. Login Streak */
        .streak-card {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, rgba(184, 179, 243, 0.15), rgba(30, 30, 35, 0.8));
            text-align: center;
            padding: 2rem;
        }

        .streak-flame {
            font-size: 3rem;
            margin-bottom: 0.5rem;
            display: inline-block;
            animation: float 3s ease-in-out infinite;
        }

        .streak-count {
            font-size: 2.5rem;
            color: var(--text-heading);
            font-weight: 800;
        }

        .streak-msg {
            color: var(--lavender-light);
            margin-top: 0.5rem;
            letter-spacing: 1px;
        }

        /* 2. Performance Meter */
        .meter-container {
            position: relative;
            width: 200px;
            height: 100px;
            background: conic-gradient(from 180deg,
                    var(--lavender-main) 0deg,
                    var(--lavender-main) var(--score-deg, 0deg),
                    rgba(255, 255, 255, 0.1) var(--score-deg, 0deg),
                    rgba(255, 255, 255, 0.1) 180deg,
                    transparent 180deg);
            border-radius: 100px 100px 0 0;
            margin: 0 auto;
            overflow: hidden;
        }

        .meter-needle {
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 4px;
            height: 90px;
            background: white;
            transform-origin: bottom center;
            transform: rotate(-90deg);
            /* Start */
            transition: transform 1.5s cubic-bezier(0.2, 0.8, 0.2, 1);
            z-index: 5;
        }

        .meter-label {
            text-align: center;
            margin-top: 1rem;
            color: var(--lavender-light);
        }

        /* 3. Today's Assessment */
        .assessment-card {
            background: rgba(139, 92, 246, 0.1);
            border-left: 4px solid var(--primary-accent);
        }

        .start-btn {
            background: var(--text-heading);
            color: var(--text-dark);
            border: none;
            padding: 0.5rem 1.2rem;
            border-radius: 20px;
            font-weight: 600;
            margin-top: 1rem;
            cursor: pointer;
        }

        /* 4. Ongoing Courses */
        .course-list {
            list-style: none;
        }

        .course-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 0.8rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: var(--text-body);
        }

        .course-dot {
            width: 8px;
            height: 8px;
            background: var(--lavender-main);
            border-radius: 50%;
        }

        /* 5. Study Materials */
        .materials-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .material-icon {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
        }

        .material-icon:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--lavender-main);
        }

        /* 6. Topper's Roadmap */
        .roadmap-card {
            grid-column: 1 / -1;
            min-height: 150px;
            display: flex;
            align-items: center;
            justify-content: space-around;
            position: relative;
        }

        .roadmap-line {
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 1;
        }

        .roadmap-point {
            width: 40px;
            height: 40px;
            background: var(--card-bg);
            border: 2px solid var(--lavender-main);
            border-radius: 50%;
            z-index: 2;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            position: relative;
        }

        .roadmap-point.completed {
            background: var(--lavender-main);
            color: var(--text-dark);
        }

        .point-label {
            position: absolute;
            top: 110%;
            width: 100px;
            text-align: center;
            font-size: 0.8rem;
            left: -30px;
        }

        @keyframes float {
            0% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }

            100% {
                transform: translateY(0px);
            }
        }

        /* Circular Progress Ring Logic */
        .circular-progress-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 1.5rem 0;
        }

        .circular-progress {
            width: 160px;
            height: 160px;
            border-radius: 50%;
            background: conic-gradient(var(--lavender-main) var(--progress-deg, 0deg), rgba(255, 255, 255, 0.05) 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: background 0.4s ease;
            box-shadow: 0 0 20px rgba(167, 139, 250, 0.1);
        }

        .inner-circle {
            width: 130px;
            height: 130px;
            border-radius: 50%;
            background: var(--bg-charcoal);
            /* Matches card/bg */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2;
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .score-text {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--text-heading);
            line-height: 1;
        }

        .score-label {
            font-size: 0.8rem;
            color: var(--lavender-light);
            margin-top: 0.3rem;
            font-weight: 500;
        }

        /* --- MODULATOR WORKSPACE --- */
        #modulator-container {
            /* display: none; Removed to allow visibility when parent is active */
            min-height: 100vh;
            background: var(--bg-charcoal);
            padding: 2rem;
            position: relative;
            z-index: 60;
            /* Above dashboard */
            animation: fadeIn 0.4s ease;
        }

        .modulator-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 2rem;
            border-bottom: 1px solid var(--card-border);
            padding-bottom: 1rem;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--card-border);
            color: var(--text-body);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .back-btn:hover {
            background: var(--lavender-main);
            color: var(--text-dark);
            transform: translateX(-3px);
        }

        /* Updated Modulator Styles */
        .action-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--card-border);
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: var(--text-body);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            height: 140px;
        }

        .action-card .icon {
            font-size: 2rem;
            filter: grayscale(1);
            transition: 0.2s;
        }

        .action-card:hover {
            background: rgba(255, 255, 255, 0.07);
            transform: translateY(-2px);
        }

        .action-card.selected {
            border-color: var(--lavender-main);
            background: rgba(167, 139, 250, 0.1);
            color: white;
            box-shadow: 0 0 15px rgba(167, 139, 250, 0.1);
        }

        .action-card.selected .icon {
            filter: grayscale(0);
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 900px) {
            .action-grid {
                grid-template-columns: 1fr;
            }
        }

        /* --- SMART ASSESSMENT WORKSPACE --- */
        #assessment-container {
            display: none;
            opacity: 0;
            transition: opacity 0.4s ease, transform 0.4s ease;
            transform: translateY(20px);
            max-width: 1000px;
            margin: 0 auto;
            position: relative;
            z-index: 5;
        }

        #assessment-container.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* Assessment Header */
        .assessment-header {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1.5rem 2rem;
            background: rgba(18, 18, 18, 0.95);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--card-border);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        /* Timer Display */
        .timer-display {
            color: var(--text-body);
            font-size: 0.9rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .timer-display.warning {
            color: #ef4444;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.6;
            }
        }

        /* Progress Bar */
        .progress-track {
            flex: 1;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--lavender-main), var(--primary-accent));
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 10px;
        }

        /* Question Card */
        .question-card-container {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 2rem;
            height: calc(100vh - 120px);
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .question-box {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: var(--card-radius);
            padding: 2.5rem;
            box-shadow: var(--shadow-soft);
            animation: fadeIn 0.5s ease;
        }

        .q-tag {
            display: inline-block;
            padding: 0.4rem 1rem;
            background: rgba(124, 58, 237, 0.15);
            border: 1px solid var(--primary-accent);
            border-radius: 20px;
            font-size: 0.85rem;
            color: var(--lavender-light);
            font-weight: 600;
        }

        .q-text {
            color: var(--text-heading);
            font-size: 1.4rem;
            line-height: 1.6;
            margin: 2rem 0;
            font-weight: 500;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            gap: 1rem;
            margin: 2rem 0;
        }

        .option-btn {
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(255, 255, 255, 0.1);
            padding: 1.2rem 1.5rem;
            border-radius: 12px;
            color: var(--text-heading);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 1rem;
        }

        .option-btn:hover {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--lavender-main);
            transform: translateX(5px);
        }

        .option-btn.correct {
            background: rgba(34, 197, 94, 0.15);
            border-color: #22c55e;
            color: #22c55e;
        }

        .option-btn.wrong {
            background: rgba(239, 68, 68, 0.15);
            border-color: #ef4444;
            color: #ef4444;
        }

        /* Hint Section */
        .hint-section {
            margin-top: 2rem;
        }

        .hint-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--card-border);
            color: var(--lavender-main);
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.95rem;
            font-weight: 500;
        }

        .hint-btn:hover {
            background: rgba(167, 139, 250, 0.1);
            border-color: var(--lavender-main);
        }

        .hint-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .hint-box {
            background: rgba(124, 58, 237, 0.1);
            border-left: 3px solid var(--primary-accent);
            padding: 1rem 1.2rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: var(--text-body);
            animation: slideUp 0.3s ease;
        }

        /* Feedback Area */
        .feedback-area {
            min-height: 60px;
            margin-top: 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-radius: 12px;
            animation: slideUp 0.3s ease;
        }

        .feedback-area.correct {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid #22c55e;
        }

        .feedback-area.wrong {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
        }

        .feedback-msg {
            color: white;
            font-weight: 500;
        }

        .next-btn {
            background: white;
            color: black;
            padding: 0.8rem 2rem;
            border-radius: 30px;
            font-weight: 700;
            border: none;
            cursor: pointer;
            transition: 0.2s;
        }

        .next-btn:hover {
            transform: scale(1.05);
        }

        /* MODULATOR MODE CARDS */
        .mode-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            text-align: left;
        }

        .mode-card:hover {
            transform: translateY(-5px);
            border-color: rgba(167, 139, 250, 0.5);
            background: rgba(167, 139, 250, 0.05);
        }

        .mode-card.selected {
            border-color: var(--primary-accent);
            background: rgba(124, 58, 237, 0.15);
            box-shadow: 0 4px 20px rgba(124, 58, 237, 0.2);
        }

        .mode-card .icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            color: var(--lavender-light);
            transition: 0.3s;
        }

        .mode-card.selected .icon {
            background: var(--primary-accent);
            color: white;
        }

        .mode-label {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-heading);
            margin-bottom: 0.3rem;
        }

        .mode-desc {
            font-size: 0.85rem;
            color: var(--text-body);
            line-height: 1.4;
        }

        /* Modulator Pills */
        .mod-pill-btn {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-body);
            padding: 0.6rem 1.2rem;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .mod-pill-btn:hover:not(.disabled) {
            background: rgba(124, 58, 237, 0.2);
            border-color: var(--primary-accent);
            color: white;
            transform: translateY(-2px);
        }

        .mod-pill-btn.active {
            background: var(--primary-accent);
            border-color: var(--primary-accent);
            color: white;
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
        }

        .mod-pill-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            pointer-events: none;
        }

        .upload-panel.dragover {
            border-color: var(--primary-accent) !important;
            background: rgba(124, 58, 237, 0.1) !important;
        }

        /* Screens */
        .screen {
            display: none;
            opacity: 0;
            transform: translateX(20px);
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1), transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .screen.active {
            display: block;
            opacity: 1;
            transform: translateX(0);
        }

        /* Intro Screen */
        .intro-card {
            max-width: 600px;
            margin: 3rem auto;
            text-align: center;
            background: var(--card-glass);
            padding: 3rem;
            border-radius: 24px;
            border: 1px solid var(--card-border);
            box-shadow: var(--shadow-soft);
        }

        .intro-icon {
            width: 80px;
            height: 80px;
            background: var(--lavender-main);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            font-size: 2.5rem;
            color: var(--text-dark);
        }

        .intro-title {
            color: white;
            font-size: 2rem;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .intro-subtitle {
            color: var(--text-body);
            margin-bottom: 2rem;
            font-size: 1rem;
        }

        .intro-meta {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .meta-badge {
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem 1.2rem;
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--lavender-light);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .intro-note {
            text-align: left;
            background: rgba(124, 58, 237, 0.1);
            padding: 1.2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
            border-left: 3px solid var(--primary-accent);
        }

        /* Result Screen Enhancements */
        .result-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin: 2rem 0;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.2rem;
            border-radius: 12px;
            text-align: center;
        }

        .stat-label {
            color: var(--text-body);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }

        .stat-value {
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn-secondary {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            color: var(--lavender-main);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-secondary:hover {
            background: rgba(167, 139, 250, 0.1);
            border-color: var(--lavender-main);
            transform: translateY(-2px);
        }

        /* AI Explanation View */
        .explanation-view {
            max-width: 800px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .explanation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .explanation-mode-selector {
            display: flex;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            padding: 0.3rem;
            border-radius: 10px;
        }

        .mode-btn {
            padding: 0.5rem 1rem;
            background: transparent;
            color: var(--text-body);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.85rem;
            font-weight: 500;
        }

        .mode-btn.active {
            background: var(--lavender-main);
            color: var(--text-dark);
        }

        .explanation-content {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: var(--card-radius);
            padding: 2rem;
            max-height: 60vh;
            overflow-y: auto;
        }

        .explanation-content h3 {
            color: var(--text-heading);
            margin-bottom: 1rem;
            font-size: 1.3rem;
        }

        .explanation-content p {
            color: var(--text-body);
            line-height: 1.8;
            margin-bottom: 1rem;
        }

        .explanation-step {
            background: rgba(124, 58, 237, 0.1);
            border-left: 3px solid var(--primary-accent);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
        }

        .explanation-step strong {
            color: var(--lavender-light);
        }

        /* --- ACHIEVEMENTS STYLES --- */
        .achieve-stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.2rem;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-3px);
        }

        .stat-icon {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-body);
            margin-top: 0.2rem;
        }

        .rank-progress-card {
            background: linear-gradient(90deg, rgba(124, 58, 237, 0.1), rgba(167, 139, 250, 0.05));
            border: 1px solid var(--primary-accent);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2.5rem;
        }

        .rank-progress-track {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .rank-progress-fill {
            height: 100%;
            background: var(--lavender-main);
            border-radius: 4px;
            box-shadow: 0 0 10px var(--primary-accent);
        }

        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
            gap: 1.5rem;
        }

        .badge-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.5rem 1rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .badge-card.owned {
            border-color: var(--lavender-main);
            box-shadow: 0 0 15px rgba(124, 58, 237, 0.15);
        }

        .badge-card.locked {
            opacity: 0.5;
            filter: grayscale(0.8);
        }

        .badge-card:hover {
            transform: translateY(-5px);
        }

        .badge-icon {
            font-size: 2rem;
            margin-bottom: 0.8rem;
        }

        .badge-name {
            font-weight: 600;
            color: white;
            font-size: 0.95rem;
            margin-bottom: 0.3rem;
        }

        .badge-desc {
            font-size: 0.75rem;
            color: var(--text-body);
            /* Always visible on small cards for clarity, or toggle on hover */
            margin-top: 0.5rem;
            line-height: 1.2;
        }

        /* Shine Animation */
        .badge-shine {
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transform: skewX(-20deg);
            animation: shine 4s infinite;
        }

        @keyframes shine {
            0% {
                left: -100%;
            }

            20% {
                left: 200%;
            }

            /* Fast pass */
            100% {
                left: 200%;
            }

            /* Wait */
        }

        /* --- REALISTIC FLAME ANIMATION --- */
        /* --- REALISTIC FLAME ANIMATION (PREMIUM UPGRADE) --- */
        .real-flame-container {
            width: 40px;
            height: 40px;
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            position: relative;
            /* For containment */
        }

        .real-flame {
            width: 26px;
            height: 26px;
            /* Premium Gradient: Orange to Red-Violet */
            background: linear-gradient(135deg, #fbbf24 0%, #ef4444 50%, #7c3aed 100%);
            border-radius: 50% 0 50% 50%;
            transform: rotate(-45deg);
            /* Complex Gradient Glow: Orange -> Purple */
            box-shadow:
                0 0 15px 4px rgba(251, 191, 36, 0.4),
                /* Inner Warmth */
                0 -5px 20px 4px rgba(124, 58, 237, 0.4),
                /* Outer Cosmic Glow */
                inset -2px 2px 5px rgba(255, 255, 255, 0.2);
            /* 3D Highlight */
            animation: flame-idle 3s infinite ease-in-out;
            position: relative;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            /* Bouncy transition */
            z-index: 2;
        }

        /* Inner Core - Hot White/Yellow */
        .real-flame::after {
            content: '';
            position: absolute;
            bottom: 4px;
            right: 4px;
            width: 14px;
            height: 14px;
            background: radial-gradient(circle at bottom right, #ffffff 40%, #fbbf24 90%);
            border-radius: 50% 0 50% 50%;
            animation: flame-flicker 1.5s infinite alternate-reverse;
            filter: blur(1px);
            opacity: 0.9;
        }

        /* Spark/Ember Particles (Hidden by default, appear on hover) */
        .real-flame::before {
            content: '';
            position: absolute;
            top: -10px;
            left: 10px;
            width: 4px;
            height: 4px;
            background: #fbbf24;
            border-radius: 50%;
            opacity: 0;
            box-shadow: 10px -5px 0 #ef4444, -5px -10px 0 #7c3aed;
            /* Multiple sparks */
            transform: rotate(45deg);
            pointer-events: none;
        }

        /* --- INTERACTIVE HOVER EFFECTS --- */
        .streak-card-layout:hover .real-flame {
            transform: rotate(-45deg) scale(1.15);
            box-shadow:
                0 0 25px 8px rgba(251, 191, 36, 0.6),
                0 -10px 30px 8px rgba(124, 58, 237, 0.6);
            filter: brightness(1.2);
        }

        .streak-card-layout:hover .real-flame::before {
            animation: ember-rise 1.5s infinite linear;
        }

        /* --- ANIMATIONS --- */

        /* 1. Main Flame Movement (Subtle & Fluid) */
        @keyframes flame-idle {

            0%,
            100% {
                transform: rotate(-45deg) scale(1);
                border-radius: 50% 0 50% 50%;
            }

            50% {
                transform: rotate(-45deg) scale(1.05) translateY(-2px);
                border-radius: 50% 2% 50% 50%;
                /* Slight distinct point */
            }
        }

        /* 2. Inner Core Flicker (Rapid) */
        @keyframes flame-flicker {
            0% {
                transform: scale(1);
                opacity: 0.9;
            }

            100% {
                transform: scale(0.9);
                opacity: 0.7;
            }
        }

        /* 3. Ember Rising Effect */
        @keyframes ember-rise {
            0% {
                opacity: 1;
                transform: rotate(45deg) translateY(0) scale(1);
            }

            100% {
                opacity: 0;
                transform: rotate(45deg) translateY(-25px) scale(0);
            }
        }

        /* --- WHITEBOARD STYLES --- */
        .wb-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .wb-element-hidden {
            display: none !important;
        }

        .wb-card {
            background: var(--surface-light);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .wb-card:hover {
            transform: translateY(-5px);
            border-color: var(--lavender-main);
        }

        .wb-icon {
            width: 48px;
            height: 48px;
            margin-bottom: 1rem;
            color: var(--text-muted);
            transition: all 0.3s ease;
        }

        .wb-card:hover .wb-icon {
            color: var(--lavender-main);
            transform: scale(1.1);
        }

        /* Lessons */
        .wb-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .wb-lesson-card {
            background: var(--surface-light);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 1.25rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .wb-lesson-card:hover {
            border-color: var(--lavender-main);
            transform: translateX(5px);
            background: rgba(139, 92, 246, 0.05);
        }

        .wb-tag {
            font-size: 0.75rem;
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-muted);
        }

        /* MCQ UI */
        .wb-mcq-container {
            background: var(--surface-light);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--border-color);
        }

        .mcq-progress-bar {
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin-bottom: 2rem;
            overflow: hidden;
        }

        .mcq-progress-fill {
            height: 100%;
            background: var(--lavender-main);
            width: 0%;
            transition: width 0.3s ease;
        }

        .mcq-option {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-color);
            padding: 1rem 1.5rem;
            border-radius: 12px;
            margin-bottom: 0.8rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 1rem;
            transition: all 0.2s ease;
        }

        .mcq-option:hover:not(.disabled) {
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--lavender-main);
        }

        .mcq-option.correct {
            background: rgba(34, 197, 94, 0.15);
            border-color: #22c55e;
            color: #22c55e;
        }

        .mcq-option.wrong {
            background: rgba(239, 68, 68, 0.15);
            border-color: #ef4444;
            color: #ef4444;
        }

        .mcq-option.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        .ai-helper-btn {
            background: transparent;
            border: 1px solid var(--lavender-main);
            color: var(--lavender-main);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
        }

        .ai-helper-btn:hover {
            background: rgba(139, 92, 246, 0.1);
        }


        /* --- LEARNING ROADMAP STYLES --- */
        .roadmap-container {
            position: relative;
            padding: 3rem 1rem;
            margin-top: 1rem;
            overflow: hidden;
        }

        .roadmap-track {
            position: relative;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 0 2rem;
        }

        .roadmap-progress {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 75%;
            /* Dynamic */
            background: linear-gradient(90deg, #7c3aed, #22c55e);
            border-radius: 4px;
            transition: width 1s ease-in-out;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.3);
        }

        .checkpoint {
            position: relative;
            z-index: 2;
            width: 24px;
            height: 24px;
            background: #1e1e24;
            border: 2px solid #555;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checkpoint.completed {
            background: #22c55e;
            border-color: #22c55e;
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
        }

        .checkpoint.current {
            background: #1e1e24;
            border-color: #a78bfa;
            box-shadow: 0 0 15px rgba(167, 139, 250, 0.6);
            transform: scale(1.2);
            animation: pulse-checkpoint 2s infinite;
        }

        .checkpoint.locked {
            border-color: rgba(255, 255, 255, 0.1);
            opacity: 0.6;
            cursor: not-allowed;
        }

        .checkpoint-label {
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            font-size: 0.75rem;
            color: var(--text-muted);
            transition: color 0.3s;
        }

        .checkpoint.completed .checkpoint-label {
            color: #22c55e;
        }

        .checkpoint.current .checkpoint-label {
            color: #a78bfa;
            font-weight: 700;
        }

        .roadmap-car {
            position: absolute;
            top: -24px;
            /* Adjust based on car size */
            left: 75%;
            /* Matches progress width */
            width: 40px;
            height: 25px;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23a78bfa' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12a6 6 0 0 0 6 6h2c.312 0 .624.031.926.09'%3E%3C/path%3E%3Ccircle cx='16.5' cy='16.5' r='2.5'%3E%3C/circle%3E%3Ccircle cx='6.5' cy='16.5' r='2.5'%3E%3C/circle%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-size: contain;
            transform: translateX(-50%);
            transition: left 1s ease-in-out;
            z-index: 3;
            filter: drop-shadow(0 0 5px rgba(167, 139, 250, 0.5));
        }

        @keyframes pulse-checkpoint {
            0% {
                box-shadow: 0 0 0 0 rgba(167, 139, 250, 0.4);
            }

            70% {
                box-shadow: 0 0 0 10px rgba(167, 139, 250, 0);
            }

            100% {
                box-shadow: 0 0 0 0 rgba(167, 139, 250, 0);
            }
        }

        .finish-flag {
            font-size: 1.5rem;
            filter: grayscale(100%);
            transition: all 0.5s;
        }

        .finish-flag.unlocked {
            filter: grayscale(0%);
            animation: bounce 1s infinite alternate;
        }

        @keyframes bounce {
            to {
                transform: translateY(-5px);
            }
        }

        /* --- FULL PROFILE PAGE STYLES --- */
        .profile-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 1rem;
        }

        .profile-header-card {
            background: linear-gradient(135deg, rgba(30, 30, 40, 0.8), rgba(20, 20, 25, 0.9));
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 2rem;
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .profile-avatar-glow {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #27272a;
            border: 3px solid var(--lavender-main);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: white;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.4);
            animation: pulse-glow 3s infinite;
        }

        @keyframes pulse-glow {
            0% {
                box-shadow: 0 0 15px rgba(139, 92, 246, 0.3);
            }

            50% {
                box-shadow: 0 0 30px rgba(139, 92, 246, 0.6);
            }

            100% {
                box-shadow: 0 0 15px rgba(139, 92, 246, 0.3);
            }
        }

        .heatmap-container {
            background: var(--surface-light);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(30px, 1fr));
            gap: 6px;
            margin-top: 1rem;
        }

        .heatmap-day {
            aspect-ratio: 1;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
        }

        .heatmap-day:hover {
            transform: scale(1.2);
            z-index: 10;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        .heatmap-day[data-level="1"] {
            background: rgba(139, 92, 246, 0.2);
        }

        .heatmap-day[data-level="2"] {
            background: rgba(139, 92, 246, 0.5);
        }

        .heatmap-day[data-level="3"] {
            background: rgba(139, 92, 246, 0.8);
        }

        .heatmap-day[data-level="4"] {
            background: #8b5cf6;
            box-shadow: 0 0 10px #8b5cf6;
        }

        .perf-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .perf-card {
            background: var(--surface-light);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            transition: translateY 0.3s;
        }

        .perf-card:hover {
            transform: translateY(-5px);
            border-color: var(--lavender-main);
        }

        .subject-prog-bar-container {
            margin-bottom: 1rem;
            cursor: pointer;
        }

        .subject-prog-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-body);
        }

        .subject-prog-track {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .subject-prog-fill {
            height: 100%;
            border-radius: 4px;
            width: 0%;
            transition: width 1s ease-out;
        }

        .badge-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 1rem;
        }

        .badge-item {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            align-content: center;
            font-size: 2rem;
            cursor: pointer;
            filter: grayscale(100%) opacity(0.5);
            transition: all 0.3s;
            position: relative;
        }

        .badge-item.unlocked {
            filter: none;
            background: rgba(139, 92, 246, 0.15);
            border: 1px solid var(--lavender-main);
        }

        .badge-item:hover {
            transform: scale(1.1);
        }


        /* --- HELP CENTRE STYLES --- */
        .help-action-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .help-action-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(167, 139, 250, 0.4);
        }

        .help-icon-box {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .help-card-title {
            color: var(--text-heading);
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.2rem;
            margin-top: 0;
        }

        .help-card-desc {
            color: var(--text-body);
            font-size: 0.85rem;
            margin: 0;
        }

        /* --- PROFILE DROPDOWN --- */
        #profile-dropdown {
            position: absolute;
            top: 80px;
            right: 2rem;
            width: 340px;
            background: rgba(30, 30, 35, 0.95);
            -webkit-backdrop-filter: blur(20px);
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            padding: 1.5rem;
            z-index: 1000;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            transform: translateY(-20px);
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        #profile-dropdown.active {
            transform: translateY(0);
            opacity: 1;
            pointer-events: all;
        }

        .profile-dd-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--card-border);
            margin-bottom: 1.5rem;
        }

        .profile-dd-avatar {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: var(--bg-charcoal);
            border: 2px solid var(--lavender-main);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 0 15px rgba(167, 139, 250, 0.3);
            transition: transform 0.3s ease;
        }

        .profile-dd-avatar:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(167, 139, 250, 0.5);
        }

        .dd-stats-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            gap: 0.5rem;
        }

        .dd-stat-item {
            flex: 1;
            text-align: center;
            font-size: 0.75rem;
            color: var(--text-muted);
            padding: 0.8rem 0.5rem;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            border: 1px solid transparent;
            transition: all 0.2s;
            cursor: default;
        }

        .dd-stat-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .dd-stat-val {
            display: block;
            font-weight: 700;
            color: white;
            font-size: 1.1rem;
            margin-bottom: 0.2rem;
        }

        .dd-action-btn {
            width: 100%;
            padding: 0.8rem;
            border-radius: 12px;
            border: 1px solid var(--card-border);
            background: rgba(255, 255, 255, 0.03);
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 0.8rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.6rem;
            font-weight: 500;
        }

        .dd-action-btn:hover {
            background: rgba(167, 139, 250, 0.1);
            border-color: var(--lavender-main);
            color: var(--lavender-light);
        }

        .dd-link-row {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.8rem 0.5rem;
            color: var(--text-body);
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 8px;
        }

        .dd-link-row:hover {
            color: white;
            background: rgba(255, 255, 255, 0.03);
            padding-left: 1rem;
        }

        /* --- FULL PROFILE PAGE --- */
        .profile-hero-card {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.15), rgba(30, 30, 35, 0.6));
            border: 1px solid var(--card-border);
            border-radius: 24px;
            padding: 2.5rem;
            display: grid;
            grid-template-columns: auto 1fr auto;
            align-items: center;
            gap: 2.5rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
        }

        .heatmap-grid {
            display: grid;
            grid-template-columns: repeat(15, 1fr);
            gap: 6px;
            margin-top: 0.5rem;
        }

        .heatmap-box {
            width: 100%;
            aspect-ratio: 1;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.05);
            transition: all 0.2s ease;
            position: relative;
        }

        .heatmap-box:hover {
            transform: scale(1.4);
            z-index: 10;
            border: 1px solid white;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }

        .heatmap-box:hover::after {
            content: attr(title);
            position: absolute;
            bottom: 120%;
            left: 50%;
            transform: translateX(-50%);
            background: black;
            color: white;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 0.7rem;
            white-space: nowrap;
            pointer-events: none;
        }

        .heatmap-level-0 {
            background: rgba(255, 255, 255, 0.05);
        }

        .heatmap-level-1 {
            background: rgba(167, 139, 250, 0.2);
        }

        .heatmap-level-2 {
            background: rgba(167, 139, 250, 0.5);
        }

        .heatmap-level-3 {
            background: rgba(167, 139, 250, 0.8);
        }

        .heatmap-level-4 {
            background: #a78bfa;
            box-shadow: 0 0 10px #a78bfa;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .graph-container {
            height: 200px;
            display: flex;
            align-items: flex-end;
            justify-content: space-between;
            padding-bottom: 5px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            gap: 1rem;
        }

        .graph-bar {
            width: 12%;
            background: linear-gradient(0deg, var(--lavender-main), var(--primary-accent));
            opacity: 0.8;
            border-radius: 6px 6px 0 0;
            transition: height 1s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .graph-bar:hover {
            opacity: 1;
            box-shadow: 0 0 10px rgba(167, 139, 250, 0.4);
        }

        .smart-suggestion {
            background: linear-gradient(90deg, rgba(16, 185, 129, 0.1), transparent);
            border-left: 3px solid #10b981;
            padding: 1.2rem;
            border-radius: 12px;
            margin-top: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideUp 0.5s ease-out;
        }

        /* --- FULL PROFILE V2 STYLES --- */
        .profile-header-new {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.2), rgba(18, 18, 18, 0.95));
            border: 1px solid var(--card-border);
            border-radius: 24px;
            padding: 2rem;
            display: grid;
            grid-template-columns: 2fr 3fr;
            gap: 2rem;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
        }

        .profile-avatar-section {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .profile-fire-anim {
            font-size: 2.5rem;
            animation: float 3s ease-in-out infinite;
            filter: drop-shadow(0 0 10px #fbbf24);
        }

        .profile-status-badge {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            border: 1px solid rgba(16, 185, 129, 0.3);
            display: inline-block;
            margin-top: 0.5rem;
        }

        .profile-stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        .p-stat-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1rem;
            text-align: center;
            transition: var(--transition);
        }

        .p-stat-card:hover {
            background: rgba(167, 139, 250, 0.1);
            transform: translateY(-5px);
            border-color: var(--lavender-main);
        }

        .p-stat-val {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.2rem;
        }

        .p-stat-label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        /* Progress Overview */
        .progress-overview-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .prog-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.2rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            animation: fadeIn 0.8s ease;
        }

        /* Heatmap Section */
        .heatmap-section {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 24px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
        }

        .heatmap-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .heatmap-filter-select {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--card-border);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            outline: none;
            font-size: 0.9rem;
            cursor: pointer;
        }

        .heatmap-grid-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
        }

        .hm-cell {
            aspect-ratio: 1;
            border-radius: 4px;
            background: #27272a;
            position: relative;
            transition: all 0.2s;
            cursor: pointer;
        }

        /* Intensity Scale - Purple */
        .hm-level-0 {
            background: #27272a;
        }

        /* Dark Gray */
        .hm-level-1 {
            background: #e9d5ff;
            opacity: 0.2;
        }

        /* Very Light */
        .hm-level-2 {
            background: #c084fc;
            opacity: 0.5;
        }

        /* Light */
        .hm-level-3 {
            background: #a855f7;
            opacity: 0.8;
        }

        /* Purple */
        .hm-level-4 {
            background: #7c3aed;
            box-shadow: 0 0 8px #7c3aed;
            opacity: 1;
        }

        /* Glowing */

        .hm-cell:hover {
            transform: scale(1.2);
            z-index: 10;
            border: 1px solid white;
        }

        .hm-tooltip {
            position: absolute;
            bottom: 110%;
            left: 50%;
            transform: translateX(-50%);
            background: #000;
            color: white;
            padding: 0.5rem;
            border-radius: 6px;
            font-size: 0.75rem;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            z-index: 20;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.5);
            border: 1px solid var(--card-border);
        }

        .hm-cell:hover .hm-tooltip {
            opacity: 1;
        }

        .insight-strip-card {
            background: linear-gradient(90deg, rgba(124, 58, 237, 0.1), transparent);
            border-left: 3px solid var(--primary-accent);
            padding: 1rem;
            margin-top: 1.5rem;
            border-radius: 8px;
            font-size: 0.9rem;
            color: var(--text-heading);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        /* Subject Performance Cards */
        .subject-perf-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .sub-perf-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.2rem;
            position: relative;
            overflow: hidden;
            transition: transform 0.2s;
        }

        .sub-perf-card:hover {
            transform: translateY(-5px);
        }

        .sub-perf-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--card-border);
        }

        .sub-perf-card.strong::before {
            background: #10b981;
        }

        .sub-perf-card.improving::before {
            background: #fbbf24;
        }

        .sub-perf-card.focus::before {
            background: #ef4444;
        }

        .sub-name {
            font-weight: 600;
            color: white;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        }

        .sub-acc {
            font-size: 1.4rem;
            font-weight: 700;
            color: white;
        }

        .sub-label {
            font-size: 0.75rem;
            padding: 2px 6px;
            border-radius: 4px;
            display: inline-block;
            margin-top: 0.5rem;
        }

        /* Actions Footer */
        .profile-actions-bar {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-top: 2rem;
            border-top: 1px solid var(--card-border);
            padding-top: 2rem;
        }

        .p-action-btn {
            flex: 1;
            padding: 0.8rem;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            color: var(--text-body);
            cursor: pointer;
            transition: var(--transition);
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .p-action-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border-color: white;
        }

        .ai-insight-badge {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background: linear-gradient(135deg, #7c3aed, #a78bfa);
            color: white;
            padding: 0.4rem 0.8rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            box-shadow: 0 0 15px rgba(124, 58, 237, 0.4);
            animation: pulse-glow 3s infinite;
        }

        @keyframes pulse-glow {

            0%,
            100% {
                box-shadow: 0 0 15px rgba(124, 58, 237, 0.4);
            }

            50% {
                box-shadow: 0 0 25px rgba(124, 58, 237, 0.8);
            }
        }

        /* --- TEACHER DASHBOARD STYLES --- */
        .teacher-stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: rgba(139, 92, 246, 0.15);
            color: var(--lavender-main);
            margin-bottom: 0.5rem;
            /* box-shadow: 0 4px 15px rgba(139, 92, 246, 0.2); */
        }

        .class-card {
            background: var(--surface-light);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 1.5rem;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .class-card:hover {
            transform: translateY(-5px);
            border-color: var(--lavender-main);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .teacher-action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 1rem;
        }

        .teacher-action-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px dashed var(--border-color);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: center;
        }

        .teacher-action-card:hover {
            background: rgba(139, 92, 246, 0.1);
            border-color: var(--lavender-main);
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 4px 20px rgba(139, 92, 246, 0.15);
        }

        .teacher-action-card div:first-child {
            transition: transform 0.3s;
        }

        .teacher-action-card:hover div:first-child {
            transform: scale(1.2) rotate(5deg);
        }

        .ai-assistant-panel {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(18, 18, 18, 0.8));
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 24px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        /* --- ROLE SELECTION STYLES --- */
        .role-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.5rem;
            margin: 2rem 0;
            align-items: stretch;
        }

        .role-card-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .role-card-item:hover {
            transform: translateY(-5px);
            border-color: var(--lavender-main);
            box-shadow: 0 0 15px rgba(167, 139, 250, 0.2);
        }

        .role-card-item.selected {
            background: rgba(167, 139, 250, 0.15);
            border-color: var(--lavender-main);
            box-shadow: 0 0 20px rgba(167, 139, 250, 0.3);
        }

        .role-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .role-card-item:hover .role-icon,
        .role-card-item.selected .role-icon {
            transform: scale(1.1);
        }

        .role-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.5rem;
        }

        .role-desc {
            font-size: 0.85rem;
            color: var(--text-muted);
            line-height: 1.4;
            margin-bottom: 1rem;
        }

        .role-features {
            text-align: left;
            width: 100%;
        }

        /* Floating Global Back Button */
        #auth-back-btn {
            position: fixed;
            top: 40px;
            left: 40px;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.03);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-muted);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            opacity: 0;
            pointer-events: none;
            transform: translateX(-20px);
        }

        #auth-back-btn.visible {
            opacity: 1;
            pointer-events: auto;
            transform: translateX(0);
        }

        #auth-back-btn:hover {
            color: var(--lavender-main);
            border-color: rgba(139, 92, 246, 0.4);
            background: rgba(139, 92, 246, 0.1);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
            transform: translateX(-5px);
            /* Slide left on hover */
        }

        #auth-back-btn:active {
            transform: scale(0.95);
        }

        .role-feature-item {
            font-size: 0.75rem;
            color: var(--text-body);
            margin-bottom: 0.3rem;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .role-feature-item::before {
            content: '';
            color: var(--lavender-main);
            font-weight: bold;
        }

        /* Responsive Layout for Roles */
        @media (max-width: 1024px) {
            .role-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            /* Connects the 3rd card to span across on tablet */
            .role-card-item:nth-child(3) {
                grid-column: span 2;
            }
        }

        @media (max-width: 600px) {
            .role-grid {
                grid-template-columns: 1fr;
            }

            .role-card-item:nth-child(3) {
                grid-column: auto;
            }
        }

        /* Teacher Attendance Buttons */
        .t-att-btn {
            border: none;
            padding: 0.4rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .t-att-present {
            background: rgba(16, 185, 129, 0.2);
            color: #10b981;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .t-att-present:hover {
            background: rgba(16, 185, 129, 0.3);
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.2);
        }

        .t-att-absent {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .t-att-absent:hover {
            background: rgba(239, 68, 68, 0.3);
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.2);
        }

        /* --- TEACHER CLASSES SPECIFIC STYLES --- */
        .t-filter-select {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--card-border);
            color: white;
            padding: 0.6rem 1rem;
            border-radius: 10px;
            outline: none;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .t-filter-select:focus {
            border-color: var(--lavender-main);
        }

        .tc-tab {
            color: var(--text-muted);
            padding-bottom: 0.8rem;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            font-weight: 500;
            transition: all 0.2s;
        }

        .tc-tab:hover {
            color: white;
        }

        .tc-tab.active {
            color: var(--lavender-main);
            border-bottom-color: var(--lavender-main);
        }

        /* Refactored Inline Styles - Batch 1 */
        .auth-card-responsive {
            max-width: 1100px;
            width: 90%;
        }

        .btn-disabled-style {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .password-toggle-icon {
            position: absolute;
            right: 1rem;
            top: 1rem;
            cursor: pointer;
            z-index: 10;
        }

        .forgot-pass-container {
            text-align: right;
            margin-bottom: 1.5rem;
            margin-top: -1rem;
        }

        .forgot-pass-link {
            color: var(--text-body);
            font-size: 0.85rem;
            text-decoration: none;
        }

        .signup-card-anim {
            transform: translateX(50px);
            opacity: 0;
        }

        .dropdown-arrow {
            position: absolute;
            right: 1rem;
            top: 1rem;
            pointer-events: none;
            color: #aaa;
        }

        .date-input-dark {
            color-scheme: dark;
        }

        .app-icon-style {
            background: var(--lavender-main);
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-dark);
        }

        .header-user-name-style {
            color: var(--text-heading);
            font-size: 1.1rem;
            font-weight: 600;
        }

        .header-user-grade-style {
            font-size: 0.85rem;
            color: var(--text-body);
        }

        .flex-spacer {
            flex: 1;
        }

        .header-profile-icon {
            border: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        .profile-dd-name {
            font-weight: 700;
            color: white;
            font-size: 1.1rem;
        }

        .profile-dd-class {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .profile-dd-badge {
            font-size: 0.75rem;
            color: #fbbf24;
            margin-top: 4px;
        }

        .btn-view-profile {
            background: var(--lavender-main);
            color: var(--text-dark);
            border: none;
        }

        .dd-buttons-row {
            display: flex;
            gap: 0.5rem;
        }

        .btn-flex-1 {
            flex: 1;
        }

        .dd-divider {
            height: 1px;
            background: var(--card-border);
            margin: 1rem 0;
        }

        /* Batch 2 */
        .logout-link {
            color: #ef4444;
        }

        .monthly-quiz-card {
            background: linear-gradient(135deg, #a78bfa 0%, #7c3aed 100%);
            text-align: center;
            padding: 2.5rem;
            position: relative;
            overflow: hidden;
        }

        .quiz-deco-circle-1 {
            position: absolute;
            top: -20px;
            right: -20px;
            width: 100px;
            height: 100px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .quiz-deco-circle-2 {
            position: absolute;
            bottom: -20px;
            left: -20px;
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .quiz-title {
            color: white;
            font-size: 1.8rem;
            margin-bottom: 0.5rem;
            position: relative;
        }

        .quiz-desc {
            color: rgba(255, 255, 255, 0.9);
            font-size: 1rem;
            position: relative;
        }

        .streak-card-layout {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .streak-title {
            color: var(--text-heading);
            font-size: 1.2rem;
        }

        .streak-desc {
            color: var(--text-body);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .perf-card-desc {
            text-align: center;
            font-size: 0.85rem;
            color: var(--text-body);
            margin-top: 0.5rem;
        }

        .cursor-pointer {
            cursor: pointer;
        }

        .assess-card-title {
            color: white;
            margin: 0.5rem 0;
        }

        .assess-card-meta {
            font-size: 0.9rem;
        }

        .course-dot-gray {
            background: #555;
        }

        .materials-grid-cols {
            grid-template-columns: repeat(5, 1fr);
        }

        .material-icon-lg {
            font-size: 1.5rem;
        }

        .material-icon-label {
            font-size: 0.8rem;
            margin-top: 5px;
        }

        .margin-top-1-5 {
            margin-top: 1.5rem;
        }

        .roadmap-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 2rem;
        }

        .roadmap-desc {
            color: var(--text-body);
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .text-right {
            text-align: right;
        }

        .roadmap-progress-text {
            color: var(--lavender-main);
            font-weight: 700;
            font-size: 1.1rem;
        }

        .btn-primary:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Batch 3 - Teacher Dashboard */
        .roadmap-progress-demo {
            width: 75%;
        }

        .roadmap-car-demo {
            left: 75%;
        }

        .dot-purple-small {
            width: 8px;
            height: 8px;
            background: #a78bfa;
            border-radius: 50%;
        }

        .btn-wide-glow {
            width: auto;
            padding: 0.6rem 2rem;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.3);
        }

        .screen-container {
            max-width: 1200px;
            margin: 0 auto;
            padding-bottom: 3rem;
        }

        .screen-header-row {
            margin-bottom: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            padding: 0 0.5rem;
        }

        .page-title-large {
            font-size: 2rem;
            color: white;
            margin-bottom: 0.5rem;
            font-weight: 700;
        }

        .page-subtitle {
            color: var(--text-body);
            font-size: 1rem;
        }

        .teacher-stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2.5rem;
        }

        .teacher-stat-card {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .teacher-stat-value {
            font-size: 2.2rem;
            color: white;
            margin: 0.5rem 0 0.2rem 0;
            font-weight: 700;
        }

        .teacher-stat-label {
            margin: 0;
            font-size: 0.9rem;
        }

        .teacher-main-layout {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }

        .flex-col-gap-2 {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .section-title {
            color: white;
            font-size: 1.3rem;
            margin: 0 0 1.5rem 0;
            font-weight: 600;
        }

        .action-card-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .status-icon-green {
            font-size: 1.5rem;
            color: #10b981;
        }

        .status-icon-yellow {
            font-size: 1.5rem;
            color: #fbbf24;
        }

        .status-icon-red {
            font-size: 1.5rem;
            color: #ef4444;
        }

        .status-label {
            font-weight: 600;
            color: white;
        }

        .status-sublabel {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .section-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-title-marginless {
            color: white;
            font-size: 1.3rem;
            margin: 0;
            font-weight: 600;
        }

        .btn-sm {
            padding: 0.5rem 1.2rem;
            font-size: 0.85rem;
        }

        .horizontal-scroll-container {
            display: flex;
            gap: 1.5rem;
            overflow-x: auto;
            padding-bottom: 1rem;
        }

        .class-snap-card-min {
            min-width: 250px;
        }

        .class-card-title {
            font-weight: 700;
            color: white;
            font-size: 1.1rem;
            margin-bottom: 0.2rem;
        }

        .class-card-subtitle {
            font-size: 0.85rem;
            color: var(--lavender-main);
            margin-bottom: 1rem;
        }

        .class-card-subtitle-light {
            font-size: 0.85rem;
            color: var(--lavender-light);
            margin-bottom: 1rem;
        }

        .class-stat-row {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }

        .class-stat-row-last {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
        }

        .text-green {
            color: #10b981;
        }

        .text-yellow {
            color: #fbbf24;
        }

        .text-red {
            color: #ef4444;
        }

        .text-muted-span {
            color: var(--text-muted);
        }

        /* Batch 4 */
        .legend-container {
            display: flex;
            gap: 1rem;
            font-size: 0.8rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--text-muted);
        }

        .dot-green-small {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
        }

        .dot-yellow-small {
            width: 8px;
            height: 8px;
            background: #fbbf24;
            border-radius: 50%;
        }

        .chart-container {
            height: 150px;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .chart-bar-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .bar-purple-light {
            background: rgba(139, 92, 246, 0.3);
            border-radius: 4px;
        }

        .bar-purple-med {
            background: rgba(139, 92, 246, 0.4);
            border-radius: 4px;
        }

        .bar-green-glow {
            background: #10b981;
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }

        .bar-top-accent {
            border-top: 2px solid #fbbf24;
        }

        .height-60 {
            width: 30px;
            height: 60px;
        }

        .height-80 {
            width: 30px;
            height: 80px;
        }

        .height-75 {
            width: 30px;
            height: 75px;
        }

        .height-110 {
            width: 30px;
            height: 110px;
        }

        .height-50 {
            width: 30px;
            height: 50px;
        }

        .chart-label {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .action-icon-large {
            font-size: 2rem;
        }

        .action-title {
            font-weight: 600;
            font-size: 0.95rem;
        }

        .action-meta {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .ai-panel-header {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            margin-bottom: 1rem;
        }

        .ai-avatar {
            width: 40px;
            height: 40px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.3);
        }

        .ai-title {
            margin: 0;
            font-size: 1.2rem;
            color: white;
        }

        .ai-status {
            font-size: 0.75rem;
            color: var(--lavender-light);
        }

        .ai-desc {
            font-size: 0.95rem;
            color: var(--text-body);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .ai-input-container {
            background: rgba(0, 0, 0, 0.3);
            padding: 0.5rem;
            border-radius: 12px;
            display: flex;
            border: 1px solid rgba(255, 255, 255, 0.1);
            align-items: center;
        }

        .ai-input {
            background: transparent;
            border: none;
            color: white;
            width: 100%;
            outline: none;
            padding: 0.5rem 0.8rem;
            font-size: 0.9rem;
        }

        .ai-send-btn {
            background: var(--primary-accent);
            border: none;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: transform 0.2s;
        }

        .ai-send-btn:hover {
            transform: scale(1.1);
        }

        .widget-title {
            color: white;
            font-size: 1.2rem;
            margin: 0 0 1.2rem 0;
            font-weight: 600;
        }

        .task-list {
            margin-top: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .task-item {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            border: 1px solid transparent;
            transition: border 0.3s;
            cursor: pointer;
        }

        .task-item-red:hover {
            border-color: rgba(239, 68, 68, 0.4);
        }

        .task-item-yellow:hover {
            border-color: rgba(251, 191, 36, 0.4);
        }

        .task-dot-red {
            margin-top: 6px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #ef4444;
            box-shadow: 0 0 10px rgba(239, 68, 68, 0.4);
            flex-shrink: 0;
        }

        .task-dot-yellow {
            margin-top: 6px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #fbbf24;
            box-shadow: 0 0 10px rgba(251, 191, 36, 0.4);
            flex-shrink: 0;
        }

        .task-dot-green {
            margin-top: 6px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #10b981;
            box-shadow: 0 0 10px rgba(16, 185, 129, 0.4);
            flex-shrink: 0;
        }

        .task-title {
            font-size: 0.95rem;
            color: white;
            font-weight: 500;
            margin-bottom: 0.2rem;
        }

        .task-meta {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .padding-1-5 {
            padding: 1.5rem;
        }

        .widget-title-sm {
            color: white;
            font-size: 1.1rem;
            margin: 0 0 1rem 0;
            font-weight: 600;
        }

        .attention-list {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .attention-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            padding-bottom: 0.5rem;
            cursor: pointer;
        }

        .attention-item-last {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .attn-name {
            color: white;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .attn-class {
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        .tag-red {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            font-size: 0.75rem;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .tag-yellow {
            background: rgba(251, 191, 36, 0.1);
            color: #fbbf24;
            font-size: 0.75rem;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .tag-purple {
            background: rgba(139, 92, 246, 0.1);
            color: var(--lavender-main);
            font-size: 0.75rem;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .btn-full-width {
            width: 100%;
            font-size: 0.85rem;
            margin-top: 1rem;
        }

        .filter-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .class-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .margin-bottom-1-5 {
            margin-bottom: 1.5rem;
        }

        .margin-bottom-2 {
            margin-bottom: 2rem;
        }

        .text-white {
            color: white;
        }

        .tabs-container {
            display: flex;
            gap: 1.5rem;
            border-bottom: 1px solid var(--card-border);
            margin-top: 1.5rem;
        }

        .padding-top-2 {
            padding-top: 2rem;
        }

        .fixed-filter-bar {
            position: sticky;
            top: 0;
            z-index: 10;
            background: rgba(18, 18, 20, 0.95);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            margin-bottom: 2rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .filter-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-right: 0.5rem;
        }

        .select-pad {
            padding: 0.5rem 1rem;
        }

        /* Batch 5 */
        .flex-gap-2 {
            display: flex;
            gap: 2rem;
        }

        .chart-wrapper {
            flex: 2;
            height: 180px;
            position: relative;
        }

        .chart-label-abs {
            position: absolute;
            top: 0;
            left: 0;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .margin-top-1 {
            margin-top: 1rem;
        }

        .legend-col {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            gap: 1rem;
        }

        .legend-row-sm {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .legend-rect-green {
            width: 12px;
            height: 12px;
            background: #10b981;
            border-radius: 2px;
        }

        .legend-text-sm {
            color: white;
            font-size: 0.9rem;
        }

        .legend-rect-red {
            width: 12px;
            height: 12px;
            background: #ef4444;
            border-radius: 2px;
        }

        .widget-title-marginless {
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0;
        }

        .text-purple {
            color: #8b5cf6;
        }

        .chart-container-sm {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 180px;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .bar-wrapper {
            text-align: center;
            width: 12%;
        }

        .bar-bg {
            background: #27272a;
            border-radius: 4px 4px 0 0;
            margin: 0 auto;
            width: 40%;
            position: relative;
        }

        .height-60-pct {
            height: 60%;
        }

        .height-75-pct {
            height: 75%;
        }

        .height-65-pct {
            height: 65%;
        }

        .height-85-pct {
            height: 85%;
        }

        .bar-fill {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: #8b5cf6;
            opacity: 0.8;
        }

        .height-70-pct {
            height: 70%;
        }

        .height-90-pct {
            height: 90%;
        }

        .chart-label-mt {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
        }

        .section-header-compact {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .badge-ai {
            background: rgba(124, 58, 237, 0.2);
            color: #a78bfa;
            font-size: 0.75rem;
            padding: 2px 8px;
            border-radius: 12px;
        }

        .flex-col-gap-1 {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .alert-card-red {
            background: rgba(255, 255, 255, 0.03);
            padding: 1rem;
            border-radius: 10px;
            border-left: 3px solid #ef4444;
        }

        .alert-card-yellow {
            background: rgba(255, 255, 255, 0.03);
            padding: 1rem;
            border-radius: 10px;
            border-left: 3px solid #fbbf24;
        }

        .flex-between-mb-half {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }

        .text-bold-white {
            font-weight: 600;
            color: white;
        }

        .text-red-sm {
            color: #ef4444;
            font-size: 0.85rem;
        }

        .text-yellow-sm {
            color: #fbbf24;
            font-size: 0.85rem;
        }

        .text-muted-sm {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .text-lavender-light {
            color: var(--lavender-light);
        }

        .margin-top-08 {
            margin-top: 0.8rem;
        }

        .btn-xs {
            font-size: 0.8rem;
            padding: 0.3rem 0.8rem;
        }

        .donut-chart-conic {
            position: relative;
            width: 180px;
            height: 180px;
            margin: 0 auto;
            background: conic-gradient(#10b981 0% 30%, #fbbf24 30% 80%, #ef4444 80% 100%);
            border-radius: 50%;
        }

        .donut-hole {
            position: absolute;
            width: 100px;
            height: 100px;
            background: #18181b;
            border-radius: 50%;
            top: 40px;
            left: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-direction: column;
        }

        .mt-15-col-gap-08 {
            margin-top: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
        }

        .list-item-hoverable {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: background 0.2s;
        }

        .list-item-hoverable:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        .dot-green {
            width: 10px;
            height: 10px;
            background: #10b981;
            border-radius: 50%;
        }

        .dot-yellow {
            width: 10px;
            height: 10px;
            background: #fbbf24;
            border-radius: 50%;
        }

        .dot-red {
            width: 10px;
            height: 10px;
            background: #ef4444;
            border-radius: 50%;
        }

        .card-gradient-purple {
            background: linear-gradient(180deg, rgba(124, 58, 237, 0.1), rgba(24, 24, 27, 0.5));
            border: 1px solid rgba(124, 58, 237, 0.3);
        }

        .insight-list {
            padding-left: 1.2rem;
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            color: var(--text-body);
            font-size: 0.9rem;
        }

        .btn-icon-left {
            text-align: left;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .stat-card-padded {
            text-align: center;
            padding: 1.5rem;
        }

        .stat-label-mb {
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .stat-value-large {
            font-size: 2.2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.2rem;
        }

        .text-green-sm {
            font-size: 0.8rem;
            color: #10b981;
        }

        .text-green-large {
            font-weight: 700;
            color: #10b981;
            margin-bottom: 0.2rem;
        }

        .text-red-large {
            font-weight: 700;
            color: #ef4444;
            margin-bottom: 0.2rem;
        }

        .text-purple-large {
            font-weight: 700;
            color: #a78bfa;
            margin-bottom: 0.2rem;
        }

        .filter-bar-card {
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            gap: 1.5rem;
            padding: 1.2rem;
            flex-wrap: wrap;
        }

        .date-picker-styled {
            padding: 0.5rem 1rem;
            cursor: pointer;
            color: white;
        }

        .btn-right-refresh {
            margin-left: auto;
            padding: 0.5rem 1.5rem;
        }

        .table-styled {
            width: 100%;
            border-collapse: collapse;
            color: white;
            font-size: 0.9rem;
        }

        .th-row {
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            text-align: left;
        }

        .th-cell {
            padding: 1rem;
            color: var(--text-muted);
        }

        .th-cell-center {
            padding: 1rem;
            color: var(--text-muted);
            text-align: center;
        }

        .tr-hoverable {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: background 0.2s;
        }

        .tr-hoverable:hover {
            background: rgba(255, 255, 255, 0.02);
        }

        .td-cell {
            padding: 1rem;
        }

        .td-cell-center {
            padding: 1rem;
            text-align: center;
        }

        .action-row-right {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 1rem;
        }

        .btn-wide {
            padding: 0.6rem 2rem;
        }

        .help-container {
            padding: 2rem;
            max-width: 1000px;
            margin: 0 auto;
        }

        .text-center-mb-25 {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .page-title-dark {
            color: var(--text-heading);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .page-subtitle-dark {
            color: var(--text-body);
            font-size: 1rem;
        }

        .search-wrapper-centered {
            position: relative;
            max-width: 600px;
            margin: 0 auto 3rem;
        }

        .search-input-glass {
            width: 100%;
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            padding: 1rem 1rem 1rem 3.5rem;
            border-radius: 30px;
            color: white;
            outline: none;
            font-size: 1rem;
            box-shadow: var(--shadow-soft);
            transition: all 0.3s;
        }

        .search-icon-abs {
            position: absolute;
            left: 1.2rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            pointer-events: none;
        }

        .grid-2-gap-15 {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .icon-box-blue {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
        }

        .icon-box-green {
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
        }

        .icon-box-purple {
            background: rgba(139, 92, 246, 0.2);
            color: #a78bfa;
        }

        .icon-box-yellow {
            background: rgba(245, 158, 11, 0.2);
            color: #fbbf24;
        }

        .help-panel-expanded {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            animation: slideUp 0.3s ease;
        }

        .panel-title {
            color: white;
            margin: 0;
            font-size: 1.2rem;
        }

        .btn-close-simple {
            background: none;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            font-size: 1.2rem;
        }

        .panel-content {
            color: var(--text-body);
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .grid-2-1 {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1.5rem;
        }

        .card-glass-padded {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
        }

        .ai-card-title {
            color: white;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin: 0;
        }

        .emoji-lg {
            font-size: 1.4rem;
        }

        .ai-response-box {
            background: rgba(124, 58, 237, 0.1);
            border-left: 3px solid var(--primary-accent);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-size: 0.9rem;
            color: #e2e8f0;
            animation: fadeIn 0.3s;
        }

        .chat-input-dark {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 0.8rem 1rem;
            border-radius: 12px;
            color: white;
            outline: none;
            font-size: 0.9rem;
        }

        .flex-gap-08 {
            display: flex;
            gap: 0.8rem;
        }

        .btn-chat {
            padding: 0.6rem 1.2rem;
            font-size: 0.9rem;
        }

        .text-green-large,
        .text-red-large,
        .text-purple-large {
            font-size: 2.2rem;
        }

        /* Batch 6 */

        /* Performance Cards */
        .perf-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .perf-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .perf-card:hover {
            transform: translateY(-5px);
            border-color: var(--primary-accent);
            box-shadow: var(--shadow-strong);
        }

        .val-large {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
        }

        .emoji-icon-lg {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }

        .real-flame-container-sm {
            margin: 0 auto 0.5rem auto;
        }

        /* Subject Progress */
        .subject-prog-container {
            margin: 0;
        }

        .section-heading {
            color: var(--text-heading);
            margin-bottom: 1.5rem;
        }

        .subject-prog-bar-container {
            margin-bottom: 1.2rem;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .subject-prog-bar-container:hover {
            transform: translateX(5px);
        }

        .subject-prog-header {
            display: flex;
            justify-content: space-between;
            color: white;
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        .subject-prog-track {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
        }

        .subject-prog-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 1s ease-out;
        }

        .bg-red {
            background: #ef4444;
        }

        .bg-blue {
            background: #3b82f6;
        }

        .bg-yellow {
            background: #fbbf24;
        }

        .bg-green {
            background: #10b981;
        }

        .bg-purple {
            background: #8b5cf6;
        }

        /* Badges Grid */
        .badge-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        .badge-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            filter: grayscale(100%);
            opacity: 0.5;
            transition: all 0.3s;
            position: relative;
        }

        .badge-item.unlocked {
            filter: grayscale(0%);
            opacity: 1;
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.2);
        }

        .badge-item:hover {
            transform: scale(1.05);
        }

        /* Assessment Intro */
        .intro-card {
            background: var(--card-glass);
            padding: 3rem 2rem;
            border-radius: 20px;
            border: 1px solid var(--card-border);
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-strong);
            animation: fadeIn 0.5s ease;
        }

        .intro-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: white;
        }

        .intro-subtitle {
            font-size: 1.1rem;
            color: var(--text-muted);
            margin-bottom: 2rem;
        }

        .intro-meta {
            display: flex;
            justify-content: center;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .meta-badge {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            color: #e2e8f0;
        }

        .intro-note {
            font-style: italic;
            color: var(--lavender-light);
            margin-bottom: 2rem;
        }

        .action-buttons-col {
            flex-direction: column;
            gap: 1rem;
            margin-top: 2rem;
            display: flex;
        }

        /* Assessment Header */
        .width-60px {
            min-width: 60px;
        }

        /* Profile Screen */
        .profile-header-new {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 2rem;
            padding: 2rem;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(0, 0, 0, 0.2));
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            margin-bottom: 2rem;
            align-items: center;
        }

        .profile-avatar-section {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .profile-dd-avatar-lg {
            width: 120px;
            height: 120px;
            font-size: 3.5rem;
            border: 4px solid var(--lavender-main);
            background: var(--bg-charcoal);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .avatar-badge-container {
            position: absolute;
            bottom: 0;
            right: 0;
            background: #27272a;
            border-radius: 50%;
            padding: 5px;
            border: 2px solid var(--bg-charcoal);
        }

        .profile-name-lg {
            color: white;
            font-size: 2rem;
            margin-bottom: 0.2rem;
        }

        .profile-meta-text {
            color: var(--text-muted);
            font-size: 1rem;
        }

        .profile-status-badge {
            display: inline-block;
            background: rgba(16, 185, 129, 0.2);
            color: #34d399;
            font-size: 0.8rem;
            padding: 4px 12px;
            border-radius: 12px;
            margin-top: 0.5rem;
        }

        .profile-joined-text {
            color: var(--text-body);
            font-size: 0.9rem;
            margin-top: 0.8rem;
        }

        .profile-stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        .p-stat-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            padding: 1rem;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .p-stat-val {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.2rem;
        }

        .p-stat-label {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        /* Progress Overview */
        .progress-overview-section {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .prog-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 140px;
        }

        .val-xl {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
        }

        .val-xl-green {
            font-size: 1.8rem;
            font-weight: 700;
            color: #10b981;
        }

        .label-sub {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .label-trend-green {
            font-size: 0.75rem;
            color: #10b981;
        }

        .card-border-left-yellow {
            border-left: 3px solid #f59e0b;
        }

        .label-upper-yellow {
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.8rem;
            color: #f59e0b;
            margin-bottom: 0.5rem;
        }

        .val-md-white {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
        }

        .card-border-left-purple {
            border-left: 3px solid #a78bfa;
        }

        .label-upper-purple {
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.8rem;
            color: #a78bfa;
            margin-bottom: 0.5rem;
        }

        .text-white-sm {
            font-size: 0.9rem;
            color: white;
        }

        .prog-mini-track {
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            margin-top: 0.5rem;
        }

        .prog-mini-fill {
            width: 60%;
            height: 100%;
            background: #a78bfa;
            border-radius: 2px;
        }

        /* Heatmap Section */
        .heatmap-section {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            position: relative;
        }

        .ai-insight-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(135deg, #8b5cf6, #3b82f6);
            color: white;
            font-size: 0.8rem;
            padding: 4px 12px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3);
            font-weight: 600;
        }

        .heatmap-header-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 2rem;
        }

        .flex-col {
            display: flex;
            flex-direction: column;
        }

        .heatmap-title {
            color: white;
            font-size: 1.4rem;
        }

        .heatmap-sub {
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .heatmap-legend {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 0.5rem;
            margin-top: 1rem;
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .hm-cell-sm {
            width: 12px;
            cursor: default;
        }

        .insight-strip-card {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 12px;
            padding: 1rem;
            margin-top: 2rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .insight-text {
            font-size: 0.85rem;
        }

        /* Subject Perf Grid */
        .subject-perf-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .sub-perf-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 1.5rem 1rem;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .sub-perf-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.05);
        }

        .sub-perf-card.strong {
            border-bottom: 3px solid #10b981;
        }

        .sub-perf-card.improving {
            border-bottom: 3px solid #fbbf24;
        }

        .sub-perf-card.focus {
            border-bottom: 3px solid #ef4444;
        }

        .sub-name {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-bottom: 0.5rem;
        }

        .sub-acc {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.8rem;
        }

        .sub-label {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .label-bg-green {
            background: rgba(16, 185, 129, 0.15);
            color: #10b981;
        }

        .label-bg-yellow {
            background: rgba(251, 191, 36, 0.15);
            color: #fbbf24;
        }

        .label-bg-red {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;
        }

        /* Profile Actions */
        .profile-actions-bar {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
        }

        .p-action-btn {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            color: white;
            padding: 1rem;
            border-radius: 12px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
        }

        .p-action-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        /* Modals */
        .modal-body-sm {
            max-width: 400px;
        }

        .flex-between-mb-1 {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .text-white-bold {
            color: white;
            font-weight: 700;
        }

        .flex-between-mb-1-5 {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
        }

        .text-green-bold {
            color: #10b981;
            font-weight: 700;
        }

        .achievements-banner {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            cursor: pointer;
        }

        .achievements-content {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .achievements-text {
            font-weight: 700;
            color: white;
        }

        .achievements-desc {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .view-all-link {
            color: var(--primary-accent);
            font-weight: 600;
        }

        /* Profile Dropdown */
        .profile-dd-name {
            color: white;
            font-weight: 600;
        }

        .profile-dd-grade {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        /* Batch7 */
        /* ModulatorLayout */
        .modulator-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 2rem;
            height: calc(100vh - 180px);
            padding-bottom: 2rem;

        }

        /* UploadPanel */
        .upload-panel {
            border: 2px dashed rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: var(--text-muted);
            padding: 2rem;
            transition: all0.3s ease;
            position: relative;
            background: rgba(0, 0, 0, 0.2);

        }

        .icon-xl-lavender {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--lavender-main);

        }

        .text-heading-md {
            color: var(--text-heading);
            font-size: 1.1rem;
            margin-bottom: 0.5rem;

        }

        .text-body-sm-mb1 {
            font-size: 0.9rem;
            margin-bottom: 1rem;

        }

        .link-primary {
            color: var(--primary-accent);
            cursor: pointer;
            text-decoration: underline;

        }

        .text-desc-xs {
            font-size: 0.8rem;
            color: #555;

        }

        /* FileLoadedState */
        .file-loaded-wrapper {
            background: var(--card-glass);
            padding: 1rem;
            border-radius: 12px;
            border: 1px solid var(--card-border);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 1rem;

        }

        .file-icon-box {
            background: rgba(139, 92, 246, 0.2);
            padding: 0.5rem;
            border-radius: 8px;

        }

        .file-info-col {
            flex: 1;
            text-align: left;
            overflow: hidden;

        }

        .file-name-trunc {
            color: white;
            font-weight: 500;
            white-space: no wrap;
            overflow: hidden;
            text-overflow: ellipsis;

        }

        .text-ready {
            font-size: 0.8rem;
            color: var(--text-muted);

        }

        .btn-close-red {
            background: none;
            border: none;
            color: #ef4444;
            cursor: pointer;

        }

        .text-ai-ready {
            font-size: 0.9rem;
            color: var(--lavender-light);

        }

        /* InteractionPanel */
        .interaction-panel {
            background: var(--card-glass);
            border-radius: 20px;
            border: 1px solid var(--card-border);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;

        }

        .ai-actions-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;

        }

        .mod-response-area {
            flex: 1;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            margin-bottom: 1.5rem;
            padding: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-y: auto;
            color: var(--text-body);

        }

        .mod-placeholder {
            text-align: center;
            opacity: 0.5;

        }

        .svg-placeholder-mb {
            margin-bottom: 1rem;

        }

        .content-full-dimensions {
            width: 100%;
            height: 100%;

        }

        /* ChatInputBar */
        .chat-input-bar {
            position: relative;

        }

        .mod-chat-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1rem 3rem 1rem 1.5rem;
            border-radius: 30px;
            color: white;
            outline: none;

        }

        .mod-send-btn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--primary-accent);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0.5;
            pointer-events: none;

        }

        /* WhiteboardScreen */
        .wb-header-margin {
            margin-bottom: 2rem;

        }

        .wb-title-large {
            color: var(--text-heading);
            font-size: 1.8rem;
            margin-bottom: 0.5rem;

        }

        .wb-subtitle {
            color: var(--text-muted);
            font-size: 1rem;

        }

        .wb-lessons-view {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;

        }

        .btn-back-wb {
            padding: 0.5rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            border-radius: 8px;

        }

        .wb-lessons-heading {
            margin: 0;
            color: var(--text-heading);

        }

        /* AchievementsScreen */
        .achievements-wrapper {
            max-width: 1000px;
            margin: 0 auto;
            padding-bottom: 2rem;

        }

        .achievements-header {
            margin-bottom: 2rem;
            text-align: center;

        }

        .achievements-title {
            color: var(--text-heading);
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;

        }

        .achievements-subtitle {
            color: var(--text-body);
            font-size: 1rem;

        }

        /* StatsGrid */
        .achieve-stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1.5rem;
            margin-bottom: 2rem;

        }

        .stat-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            transition: transform0.3s;

        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;

        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
            margin-bottom: 0.2rem;

        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);

        }

        /* RankProgressCard */
        .rank-progress-card {
            background: linear-gradient(135deg, rgba(88, 28, 135, 0.4), rgba(0, 0, 0, 0.4));
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 3rem;
            text-align: center;

        }

        .rank-header-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 0.8rem;

        }

        .rank-current {
            color: white;
            font-weight: 600;
            font-size: 1.1rem;

        }

        .rank-next {
            color: var(--lavender-light);
            font-size: 0.9rem;

        }

        .rank-progress-track {
            width: 100%;
            height: 8px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 4px;
            overflow: hidden;

        }

        .rank-progress-fill {
            height: 100%;
            background: var(--primary-accent);
            border-radius: 4px;
            transition: width1s ease;

        }

        .rank-prompt {
            color: var(--text-body);
            font-size: 0.85rem;
            margin-top: 0.8rem;
            text-align: center;

        }

        /* BadgesSection */
        .badges-title {
            color: white;
            margin: 2rem 01rem;
            font-size: 1.3rem;

        }

        .badges-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 1.5rem;

        }

        .badge-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 1.5rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: all0.3s;

        }

        .badge-card.owned {
            border-color: rgba(139, 92, 246, 0.3);
            background: rgba(139, 92, 246, 0.1);

        }

        .badge-card.locked {
            opacity: 0.6;
            filter: grayscale(1);

        }

        .badge-card:hover {
            transform: translateY(-5px);
        }

        .badge-shine {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 60%);
            pointer-events: none;
        }

        .badge-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;

        }

        .badge-name {
            color: white;
            font-weight: 600;
            margin-bottom: 0.3rem;

        }

        .badge-desc {
            color: var(--text-muted);
            font-size: 0.8rem;

        }

        /* EmptyState */
        .empty-state {
            text-align: center;
            color: var(--text-muted);
            padding: 4rem 2rem;

        }

        .empty-icon {
            opacity: 0.3;
            margin-bottom: 1.5rem;

        }

        /* ModulatorStylesRefactoredfromJS */
        .loader-ring {
            width: 20px;
            height: 20px;
            display: inline-block;
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-top-color: var(--primary-accent);
            border-radius: 50%;
            animation: mod-spin 1s linear infinite;
            margin-right: 0.5rem;
        }

        @keyframes mod-spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* ErrorMessageinModulator */
        .mod-error-box {
            text-align: center;
            padding: 2rem;
            color: #ef4444;

        }

        .mod-error-icon {
            font-size: 2rem;
            margin-bottom: 1rem;

        }

        .mod-error-hint {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 0.5rem;

        }

        /* HelpCentreContentStyles */
        .help-content-list {
            padding-left: 1.5rem;
            margin-top: 0.5rem;

        }

        /* HelpAILoading */
        .help-ai-loading {
            color: var(--lavender-main);
            font-style: italic;

        }

        /* WhiteboardJSRefactored */
        .wb-card-title {
            color: var(--text-heading);
            font-size: 1.1rem;

        }

        .wb-lesson-title {
            font-weight: 600;
            font-size: 1rem;
            color: var(--text-heading);
            margin-bottom: 0.25rem;

        }

        .wb-lesson-tags {
            display: flex;
            gap: 0.5rem;

        }

        .wb-tag-easy {
            color: #4ade80;

        }

        .wb-tag-medium {
            color: #fbbf24;

        }

        .wb-tag-hard {
            color: #f87171;

        }

        .wb-arrow-icon {
            width: 20px;
            height: 20px;
            stroke: var(--lavender-main);
            stroke-width: 2;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        /* Batch9 */
        /* WhiteboardQuestionStyles */
        .wb-mcq-container {
            width: 100%;
            max-width: 800px;
            padding: 2rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);

        }

        .mcq-meta {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            color: var(--text-muted);

        }

        .mcq-progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            margin-bottom: 2rem;
            overflow: hidden;

        }

        .mcq-progress-fill {
            height: 100%;
            background: var(--lavender-main);
            transition: width0.3s ease;

        }

        .mcq-question-text {
            color: white;
            font-size: 1.3rem;
            margin-bottom: 1.5rem;

        }

        .mcq-option-letter {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;

        }

        .wb-feedback {
            margin-top: 2rem;
            display: none;

        }

        .wb-feedback-correct {
            color: #22c55e;
            display: flex;
            align-items: center;
            gap: 0.5rem;

        }

        .wb-feedback-wrong {
            color: #ef4444;
            margin-bottom: 0.5rem;

        }

        .wb-explanation {
            color: var(--text-muted);
            font-size: 0.9rem;

        }

        .wb-controls {
            margin-top: 2rem;
            display: flex;
            gap: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 1.5rem;

        }

        .ai-helper-btn {
            background: rgba(139, 92, 246, 0.15);
            color: var(--lavender-light);
            border: 1px solid rgba(139, 92, 246, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all0.2s;

        }

        .ai-helper-btn:hover {
            background: rgba(139, 92, 246, 0.3);
        }

        .wb-next-btn {
            display: none;
            width: auto;
            padding: 0.6rem 1.5rem;

        }

        .wb-results-container {
            text-align: center;
            padding: 3rem;

        }

        .wb-results-title {
            color: white;
            margin-bottom: 1rem;

        }

        .wb-results-score {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 0.5rem;

        }

        .wb-results-score-high {
            color: #22c55e;

        }

        .wb-results-score-mid {
            color: #fbbf24;

        }

        .wb-results-sub {
            color: var(--text-muted);
            margin-bottom: 2rem;

        }

        .wb-results-actions {
            display: flex;
            justify-content: center;
            gap: 1rem;

        }

        /* LeaderboardModal */
        .updating-msg {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            opacity: 0.5;

        }

        .row-rank-c rown-icon {
            margin-right: 5px;

        }

        .row-indicator-high {
            color: #fbbf24;

        }

        .row-indicator-mid {
            color: #60a5fa;

        }

        /* AssessmentTopicBadges */
        .topic-badge {
            padding: 0.4rem 0.8rem;
            border-radius: 12px;
            font-size: 0.85rem;

        }

        .topic-badge-good {
            background: rgba(34, 197, 94, 0.15);
            color: #22c55e;

        }

        .topic-badge-weak {
            background: rgba(239, 68, 68, 0.15);
            color: #ef4444;

        }

        /* ExplanationStep */
        .explanation-step {
            margin-bottom: 1rem;
            padding-left: 1rem;
            border-left: 2px solid var(--primary-accent);

        }

        /* RoleSelectionHelper */
        .role-helper-text {
            color: var(--lavender-main);
            font-size: 0.9rem;
            margin-bottom: 1rem;

        }

        .option-btn-choice {
            opacity: 0.5;
            font-size: 0.8rem;
        }

        /* New Utility Classes for Inline Refactoring */
        .text-muted-sm {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .roadmap-action-container {
            display: flex;
            justify-content: center;
            margin-top: 1rem;
        }

        .teacher-header-date {
            text-align: right;
            display: none;
            margin-bottom: 0.5rem;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .chart-bar-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }

        .chart-label-sm {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .flex-col-gap-2 {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .task-header {
            font-size: 0.95rem;
            color: white;
            font-weight: 500;
            margin-bottom: 0.2rem;
        }

        .task-subheader {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .attn-item-name {
            color: white;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .attn-item-subtitle {
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        .section-header-mb1 {
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0 0 1rem 0;
        }

        /* JS Injected Components */
        .table-full-width {
            width: 100%;
            border-collapse: collapse;
            color: white;
        }

        .tr-header {
            border-bottom: 1px solid var(--card-border);
            text-align: left;
        }

        .td-pad {
            padding: 1rem;
        }

        .tr-item {
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .text-green-span {
            color: #10b981;
        }

        .text-yellow-span {
            color: #fbbf24;
        }

        .text-red-span {
            color: #ef4444;
        }

        .btn-small {
            padding: 4px 8px;
            font-size: 0.75rem;
        }

        .flex-gap-1 {
            display: flex;
            gap: 1rem;
        }

        .flex-gap-1-mb-1-5 {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .width-200 {
            width: 200px;
        }

        .text-xl {
            font-size: 1.5rem;
        }

        .h3-white-md {
            color: white;
            font-size: 1.1rem;
        }

        .flex-col-gap-1-mt-1 {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1rem;
        }

        .test-item-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 1rem;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .text-white-bold-600 {
            color: white;
            font-weight: 600;
        }

        .text-muted-sm-85 {
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .text-center-p3 {
            text-align: center;
            padding: 3rem;
        }

        .text-3rem-mb1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .chart-placeholder {
            margin-top: 2rem;
            background: rgba(255, 255, 255, 0.05);
            height: 200px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .grid-2-col-gap-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
        }

        .alert-box-red {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .margin-bottom-2 {
            margin-bottom: 2rem;
        }

        .section-header-large {
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0 0 1.5rem 0;
        }

        .donut-center-num {
            font-weight: 700;
            font-size: 1.5rem;
        }

        .donut-center-label {
            font-size: 0.7rem;
            color: var(--text-muted);
        }

        .dist-list-item-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-muted);
            font-size: 0.9rem;
        }

        .text-white {
            color: white;
        }

        .screen-limited-width {
            max-width: 1200px;
            margin: 0 auto;
            padding-bottom: 3rem;
        }

        .filter-label-white {
            font-weight: 600;
            color: white;
        }

        .section-header-compact-white {
            color: white;
            font-size: 1.2rem;
            font-weight: 600;
            margin: 0;
        }

        .selection-info {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .table-overflow {
            overflow-x: auto;
        }

        .margin-bottom-1 {
            margin-bottom: 1rem;
        }

        .margin-top-auto {
            margin-top: auto;
        }

        .input-wrapper-relative {
            position: relative;
            margin-bottom: 0.8rem;
        }

        .support-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;
        }

        .support-card-title {
            color: white;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            margin-top: 0;
        }

        .support-card-desc {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }

        .btn-full-width-mb {
            width: 100%;
            margin-bottom: 0.8rem;
        }

        .btn-report-bug {
            width: 100%;
            margin-bottom: 1rem;
            border-color: rgba(239, 68, 68, 0.4);
            color: #ef4444;
        }

        .text-sm-muted {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .text-lavender-light {
            color: var(--lavender-light);
        }

        .flex-1 {
            flex: 1;
        }

        .profile-title-large {
            color: white;
            font-size: 2rem;
            margin: 0 0 0.5rem 0;
        }

        .profile-subtitle {
            font-size: 1.1rem;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
        }

        .badge-consistent {
            background: rgba(139, 92, 246, 0.2);
            color: var(--lavender-main);
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.85rem;
            border: 1px solid var(--lavender-main);
        }

        .width-auto {
            width: auto;
        }

        .heatmap-title-text {
            color: var(--text-heading);
            margin: 0;
        }

        .heatmap-legend-row {
            display: flex;
            justify-content: flex-end;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .heatmap-legend-box {
            width: 10px;
            height: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 2px;
        }

        .text-left-margin-v {
            text-align: left;
            margin: 1.5rem 0;
        }

        .padding-1-5-rem {
            padding: 1.5rem;
        }

        .header-margin-bottom {
            text-align: left;
            margin-bottom: 2rem;
        }

        .flex-center-gap-1 {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .d-none {
            display: none;
        }

        /* Skills Tab JS Injection Classes */
        .header-red-gap {
            color: #ef4444;
            margin-bottom: 1rem;
        }

        .list-gap {
            color: var(--text-body);
            padding-left: 1.2rem;
        }

        .li-gap {
            margin-bottom: 0.5rem;
        }

        .btn-red-action {
            margin-top: 1rem;
            background: #ef4444;
            border: none;
        }

        .alert-box-yellow {
            background: rgba(251, 191, 36, 0.1);
            border: 1px solid rgba(251, 191, 36, 0.3);
            border-radius: 12px;
            padding: 1.5rem;
        }

        .header-yellow-gap {
            color: #fbbf24;
            margin-bottom: 1rem;
        }

        .btn-mt-1 {
            margin-top: 1rem;
        }

        /* Refactored Inline Styles - Batch 11 */
        .auth-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .auth-info-text {
            margin-top: 0.5rem;
            color: var(--text-muted);
        }

        .auth-contact-text {
            cursor: default;
            text-decoration: none;
            color: var(--text-secondary);
        }

        .signup-parent-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        /* --- PARENT DASHBOARD STYLES --- */
        .parent-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-top: 1rem;
        }

        .parent-card {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .parent-card.min-h-300 {
            min-height: 300px;
        }

        .parent-card-header {
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .parent-card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #fff;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 0.8rem;
        }

        /* Feature 1: Reports List */
        .report-list {
            position: relative;
            padding-right: 0.5rem;
        }

        .report-item {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 1rem;
            margin-bottom: 0.8rem;
            cursor: pointer;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .report-item:hover {
            background: rgba(255, 255, 255, 0.06);
            transform: translateX(2px);
        }

        .report-item.unread {
            border-left-color: var(--primary-accent);
            background: rgba(139, 92, 246, 0.05);
        }

        .report-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.3rem;
        }

        .report-subject {
            color: #fff;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .report-date {
            font-size: 0.8rem;
            color: var(--text-muted);
        }

        .report-desc {
            color: var(--text-body);
            font-size: 0.85rem;
            line-height: 1.4;
            display: -webkit-box;
            background: transparent;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            transition: all 0.3s;
        }

        .report-item.expanded .report-desc {
            -webkit-line-clamp: unset;
            line-clamp: unset;
        }

        .report-teacher {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: 0.5rem;
            font-style: italic;
        }

        /* Feature 2: Leave Message Form */
        .leave-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            height: 100%;
        }

        .leave-textarea {
            flex: 1;
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            color: #fff;
            padding: 1rem;
            resize: none;
            font-family: inherit;
            font-size: 0.95rem;
            transition: border-color 0.2s;
        }

        .leave-textarea:focus {
            outline: none;
            border-color: var(--primary-accent);
            background: rgba(0, 0, 0, 0.5);
        }

        .char-limit {
            text-align: right;
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: -0.5rem;
        }

        /* Feature 3: Attendance Calendar */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
            margin-bottom: 1rem;
        }

        .cal-day-header {
            text-align: center;
            font-size: 0.75rem;
            color: var(--text-muted);
            padding-bottom: 0.2rem;
            font-weight: 600;
        }

        .cal-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 0.85rem;
            color: var(--text-body);
            background: rgba(255, 255, 255, 0.02);
            cursor: default;
            position: relative;
            transition: all 0.2s;
        }

        .cal-day:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .cal-day.leave {
            background: rgba(239, 68, 68, 0.15);
            color: #fca5a5;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .cal-day.weekend {
            color: #64748b;
            background: transparent;
        }

        .cal-day.today {
            border: 1px solid var(--primary-accent);
            color: #fff;
            font-weight: 600;
        }

        .cal-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.85rem;
            color: var(--text-muted);
        }

        .leave-badge-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: #ef4444;
            border-radius: 50%;
            margin-right: 6px;
        }

        /* Feature 4: Missed Topics Accordion */
        .accordion-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .accordion-item {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s;
        }

        .accordion-item.active {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .accordion-header {
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            color: var(--text-body);
            font-weight: 500;
        }

        .accordion-header:hover {
            color: #fff;
        }

        .accordion-icon {
            transition: transform 0.3s;
        }

        .accordion-item.active .accordion-icon {
            transform: rotate(180deg);
            color: white;
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            padding: 0 1rem;
        }

        .accordion-item.active .accordion-content {
            padding-bottom: 1rem;
            max-height: 300px;
        }

        .topic-row {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .topic-dot {
            min-width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--primary-accent);
            margin-top: 6px;
        }

        /* Parent Specific Responsive */
        @media (max-width: 900px) {
            .parent-grid {
                grid-template-columns: 1fr;
            }
        }

        /* --- EDIT PROFILE MODAL --- */
        .edit-profile-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
            z-index: 2000;
            /* Above everything */
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .edit-profile-modal.active {
            display: flex;
            opacity: 1;
        }

        .edit-profile-content {
            background: var(--card-glass);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            padding: 2rem;
            position: relative;
            transform: scale(0.95);
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .edit-profile-modal.active .edit-profile-content {
            transform: scale(1);
        }

        .edit-profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .edit-profile-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: white;
            margin: 0;
        }

        .btn-close-modal {
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            line-height: 1;
            transition: color 0.2s;
        }

        .btn-close-modal:hover {
            color: white;
        }

        .profile-edit-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .edit-field-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .edit-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        .edit-input {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--card-border);
            border-radius: 10px;
            padding: 0.8rem 1rem;
            color: white;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.2s;
        }

        .edit-input:focus {
            outline: none;
            border-color: var(--primary-accent);
            background: rgba(0, 0, 0, 0.5);
            box-shadow: 0 0 0 2px rgba(139, 92, 246, 0.2);
        }

        .edit-input[readonly] {
            opacity: 0.7;
            cursor: not-allowed;
            background: rgba(255, 255, 255, 0.05);
        }

        .profile-pic-upload {
            display: flex;
            align-items: center;
            gap: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .current-pic-preview {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #a78bfa 0%, #6d28d9 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: white;
            font-weight: bold;
            border: 2px solid var(--card-border);
            overflow: hidden;
        }

        .current-pic-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .upload-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.6rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.2s;
        }

        .upload-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .modal-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 1rem;
        }

        .btn-cancel {
            background: transparent;
            color: var(--text-body);
            border: 1px solid transparent;
            padding: 0.8rem 1.5rem;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }

        .btn-cancel:hover {
            color: white;
            background: rgba(255, 255, 255, 0.05);
        }

        .save-success-msg {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: #10b981;
            color: white;
            padding: 0.6rem 1.2rem;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
            pointer-events: none;
            opacity: 0;
            transition: all 0.3s;
        }

        .save-success-msg.show {
            bottom: 3rem;
            opacity: 1;
        }

        /* --- GLOBAL THEME: SOFT INDIGO --- */
        body.theme-indigo {
            /* Background: Deep Blue-Black with Indigo tint */
            --bg-charcoal: #0f172a;
            --bg-gradient: linear-gradient(180deg, #1e1b4b 0%, #020617 100%);

            /* Primary: Soft Indigo / Muted Purple */
            --primary-accent: #6366f1;
            /* Indigo 500 */
            --lavender-main: #818cf8;
            /* Indigo 400 (for buttons) */
            --lavender-light: #c7d2fe;
            /* Indigo 200 */

            /* UI Elements */
            --card-glass: rgba(99, 102, 241, 0.08);
            --card-border: rgba(99, 102, 241, 0.2);
            --shadow-soft: 0 4px 25px rgba(30, 27, 75, 0.4);

            /* Text */
            --text-heading: #f8fafc;
            --text-body: #94a3b8;
        }

        /* --- TEACHER ASSESSMENT MODULE --- */
        /* 1. Landing Screen - Grid */
        .assessment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
            gap: 1.5rem;
            padding: 1rem 0;
        }

        .subject-card {
            background: rgba(30, 30, 36, 0.6);
            border: 1px solid var(--card-border);
            border-radius: var(--card-radius);
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .subject-card:hover {
            background: rgba(167, 139, 250, 0.1);
            transform: translateY(-5px);
            border-color: var(--lavender-main);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .subject-icon-large {
            font-size: 3rem;
            margin-bottom: 1rem;
            filter: drop-shadow(0 0 10px rgba(167, 139, 250, 0.2));
        }

        .subject-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-heading);
            margin-bottom: 0.5rem;
        }

        .subject-status {
            font-size: 0.85rem;
            color: var(--text-body);
            margin-bottom: 1.2rem;
        }

        .btn-subject-action {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--card-border);
            color: var(--lavender-light);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-size: 0.85rem;
            transition: 0.2s;
            width: 100%;
        }

        .subject-card:hover .btn-subject-action {
            background: var(--lavender-main);
            color: #1a1a20;
            border-color: var(--lavender-main);
        }

        /* 2. Assessment List View */
        .assessment-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            background: rgba(18, 18, 18, 0.4);
            -webkit-backdrop-filter: blur(5px);
            backdrop-filter: blur(5px);
            padding: 1rem;
            border-radius: 12px;
            border: 1px solid var(--card-border);
        }

        .back-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-body);
            cursor: pointer;
            background: none;
            border: none;
            font-size: 1rem;
            transition: 0.2s;
        }

        .back-btn:hover {
            color: white;
        }

        .assessment-list-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .assessment-item {
            background: rgba(255, 255, 255, 0.03);
            border-bottom: 1px solid var(--card-border);
            padding: 1.2rem;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: 0.2s;
        }

        .assessment-item:hover {
            background: rgba(255, 255, 255, 0.06);
        }

        .assess-info h4 {
            color: var(--text-heading);
            margin-bottom: 0.3rem;
            font-size: 1.1rem;
        }

        .assess-meta {
            display: flex;
            gap: 1.5rem;
            font-size: 0.9rem;
            color: var(--text-body);
        }

        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-badge.upcoming {
            background: rgba(234, 179, 8, 0.2);
            color: #facc15;
            border: 1px solid rgba(234, 179, 8, 0.3);
        }

        .status-badge.live {
            background: rgba(34, 197, 94, 0.2);
            color: #4ade80;
            border: 1px solid rgba(34, 197, 94, 0.3);
            animation: pulse-border 2s infinite;
        }

        .status-badge.completed {
            background: rgba(148, 163, 184, 0.2);
            color: #cbd5e1;
            border: 1px solid rgba(148, 163, 184, 0.3);
        }

        .assess-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-icon-action {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            background: transparent;
            color: var(--text-body);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn-icon-action:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        /* 3. Create Assessment Form */
        .create-form-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 2rem;
            align-items: start;
        }

        .form-section {
            background: var(--bg-charcoal);
            padding: 1.5rem;
            border-radius: var(--card-radius);
            border: 1px solid var(--card-border);
        }

        .form-title {
            font-size: 1.2rem;
            color: var(--text-heading);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--card-border);
        }

        .question-builder-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .question-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            padding: 1.5rem;
            position: relative;
            transition: 0.3s;
        }

        .question-card:hover {
            border-color: rgba(167, 139, 250, 0.3);
        }

        .q-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .q-number {
            font-weight: 600;
            color: var(--lavender-main);
        }

        .btn-delete-q {
            color: #ef4444;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .option-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .option-radio {
            accent-color: var(--lavender-main);
        }

        .sticky-footer {
            position: sticky;
            bottom: 2rem;
            background: rgba(18, 18, 18, 0.9);
            padding: 1rem 2rem;
            border-radius: 12px;
            border: 1px solid var(--card-border);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            margin-top: 2rem;
            z-index: 50;
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.5);
            pointer-events: none;
            /* HARDENING: Don't block background clicks */
        }

        .sticky-footer>* {
            pointer-events: auto;
            /* HARDENING: Re-enable buttons */
        }

        /* Animations */
        @keyframes pulse-border {
            0% {
                border-color: rgba(34, 197, 94, 0.3);
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.2);
            }

            70% {
                border-color: rgba(34, 197, 94, 0.6);
                box-shadow: 0 0 0 4px rgba(34, 197, 94, 0);
            }

            100% {
                border-color: rgba(34, 197, 94, 0.3);
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }

        /* Assessment Form Utilities */
        .flex-1 {
            flex: 1;
        }

        .gap-1 {
            gap: 1rem;
        }

        .btn-dashed-full {
            width: 100%;
            border-style: dashed;
        }

        .btn-publish-action {
            width: auto;
            padding: 0.8rem 2rem;
            position: relative;
            z-index: 1000;
            pointer-events: auto !important;
        }

        /* --- MODULATOR CHAT STYLES (Enforced) --- */
        .chat-input-bar {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem 1rem;
            border-radius: 30px;
            border: 1px solid var(--card-border);
            margin-top: auto;
        }

        .mod-chat-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 1rem;
            outline: none;
            padding: 0.5rem;
        }

        .mod-send-btn {
            background: var(--primary-accent);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            pointer-events: auto !important;
            background: rgba(148, 163, 184, 0.2);
            color: #cbd5e1;
            border: 1px solid rgba(148, 163, 184, 0.3);
        }

        .assess-actions {
            display: flex;
            gap: 0.5rem;
        }

        .btn-icon-action {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            border: 1px solid var(--card-border);
            background: transparent;
            color: var(--text-body);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.2s;
        }

        .btn-icon-action:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        /* 3. Create Assessment Form */
        .create-form-layout {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 2rem;
            align-items: start;
        }

        .form-section {
            background: var(--bg-charcoal);
            padding: 1.5rem;
            border-radius: var(--card-radius);
            border: 1px solid var(--card-border);
        }

        .form-title {
            font-size: 1.2rem;
            color: var(--text-heading);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--card-border);
        }

        .question-builder-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .question-card {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--card-border);
            border-radius: 12px;
            padding: 1.5rem;
            position: relative;
            transition: 0.3s;
        }

        .question-card:hover {
            border-color: rgba(167, 139, 250, 0.3);
        }

        .q-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .q-number {
            font-weight: 600;
            color: var(--lavender-main);
        }

        .btn-delete-q {
            color: #ef4444;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-top: 1rem;
        }

        .option-row {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .option-radio {
            accent-color: var(--lavender-main);
        }

        .sticky-footer {
            position: sticky;
            bottom: 2rem;
            background: rgba(18, 18, 18, 0.9);
            padding: 1rem 2rem;
            border-radius: 12px;
            border: 1px solid var(--card-border);
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            margin-top: 2rem;
            z-index: 50;
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.5);
        }

        /* Animations */
        @keyframes pulse-border {
            0% {
                border-color: rgba(34, 197, 94, 0.3);
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.2);
            }

            70% {
                border-color: rgba(34, 197, 94, 0.6);
                box-shadow: 0 0 0 4px rgba(34, 197, 94, 0);
            }

            100% {
                border-color: rgba(34, 197, 94, 0.3);
                box-shadow: 0 0 0 0 rgba(34, 197, 94, 0);
            }
        }

        /* Assessment Form Utilities */
        .flex-1 {
            flex: 1;
        }

        .gap-1 {
            gap: 1rem;
        }

        .btn-dashed-full {
            width: 100%;
            border-style: dashed;
        }

        .btn-publish-action {
            width: auto;
            padding: 0.8rem 2rem;
        }

        /* --- MODULATOR CHAT STYLES (Enforced) --- */
        .chat-input-bar {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem 1rem;
            border-radius: 30px;
            border: 1px solid var(--card-border);
            margin-top: auto;
        }

        .mod-chat-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 1rem;
            outline: none;
            padding: 0.5rem;
        }

        .mod-send-btn {
            background: var(--primary-accent);
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            pointer-events: auto !important;
            /* Fix for button not working */
        }

        .mod-send-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px rgba(124, 58, 237, 0.4);
        }

        .mod-send-btn svg {
            stroke: white;
            fill: none;
        }

        /* --- Profile Image Utilities --- */
        .profile-img-container {
            position: relative;
            overflow: hidden;
        }

        .profile-img-overlay {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 5;
            background: #fff;
        }

        /* --- AI RESPONSE BOX --- */
        .ai-response-box {
            margin-top: 1rem;
            background: rgba(255, 255, 255, 0.05);
            padding: 0.8rem;
            border-radius: 8px;
            display: none;
            font-size: 0.9rem;
            color: #e0e7ff;
            max-height: 200px;
            overflow-y: auto;
        }

        /* ANIMATED DASHBOARD BACKGROUND */
        .dashboard-bg-fallback {
            position: fixed;
            inset: 0;
            background: linear-gradient(-45deg,
                    #0B0F1A,
                    #1E1B4B,
                    #312e81,
                    #4c1d95,
                    #1E1B4B);
            background-size: 400% 400%;
            animation: gradientMove 15s ease infinite;
            z-index: -10;
            opacity: 0.8;
        }

        @keyframes gradientMove {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        .app-container,
        #dashboard-container,
        #auth-container {
            position: relative;
            z-index: 1;
        }

        /* Modulator Send Button Interaction */
        #mod-send-btn {
            opacity: 0.4;
            cursor: not-allowed;
            transition: all 0.2s ease;
            background: linear-gradient(135deg, #7a5cff, #9b6bff);
        }

        #mod-send-btn.active {
            opacity: 1;
            cursor: pointer;
            box-shadow: 0 0 12px rgba(155, 107, 255, 0.6);
        }

        #mod-chat-input {
            color: rgba(255, 255, 255, 0.6);
            transition: color 0.2s ease;
        }

        #mod-chat-input.active {
            color: #ffffff;
        }


        /* --- MODULATOR CHAT STYLES (User Requested Override) --- */
        .chat-input-bar {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(20, 18, 32, 0.95) !important;
            padding: 0.5rem 1rem;
            border-radius: 999px !important;
            border: 1px solid rgba(255, 255, 255, 0.08) !important;
            margin-top: auto;
            transition: border-color 0.2s;
        }

        .mod-chat-input {
            flex: 1;
            background: transparent !important;
            border: none !important;
            color: rgba(255, 255, 255, 0.55) !important;
            /* Muted default */
            font-size: 1rem;
            outline: none;
            padding: 0.5rem;
            transition: color 0.2s ease;
        }

        .mod-chat-input.typing {
            color: rgba(255, 255, 255, 0.95) !important;
            /* Clearer when typing */
        }

        .mod-send-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none !important;

            /* User requested defaults */
            opacity: 0.35;
            cursor: not-allowed;
            transition: all 0.2s ease;
            background: linear-gradient(135deg, #7a5cff, #9b6bff) !important;
            pointer-events: none;
            /* Make unclickable initially */
        }

        .mod-send-btn.active {
            opacity: 1;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(155, 107, 255, 0.55);
        }

        /* --- STATUS BADGE (Post-Publish) --- */
        .status-badge {
            padding: 6px 12px;
            border-radius: 12px;
            font-weight: bold;
            background: rgba(255, 255, 0, 0.15);
            /* Default Draft Yellow */
            color: #ffd700;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .status-badge.published {
            background: rgba(0, 255, 0, 0.15);
            color: #00ff88;
        }

        .assessment-status {
            margin-top: 15px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid var(--card-border);
            color: var(--text-body);
            font-size: 0.9rem;
        }

        .assessment-status-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        /* TEACHER ATTENDANCE STYLES */
        .add-student-box {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            background: var(--card-glass);
            padding: 1.5rem;
            border-radius: var(--card-radius);
            border: 1px solid var(--card-border);
            align-items: center;
        }

        .add-student-box input {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 0.8rem;
            border-radius: 12px;
            color: white;
            outline: none;
            font-size: 1rem;
        }

        .add-student-box button {
            padding: 0.8rem 1.5rem;
            background: var(--lavender-main);
            color: var(--text-dark);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
        }

        .attendance-table-container {
            background: var(--card-glass);
            border-radius: var(--card-radius);
            border: 1px solid var(--card-border);
            overflow: hidden;
        }

        .attendance-table {
            width: 100%;
            border-collapse: collapse;
            color: var(--text-body);
        }

        .attendance-table th,
        .attendance-table td {
            padding: 1rem 1.5rem;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .attendance-table th {
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-heading);
            font-weight: 600;
        }

        .status-btn {
            padding: 6px 14px;
            border-radius: 20px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .status-btn.present {
            background: rgba(0, 200, 120, 0.2);
            color: #00d084;
        }

        .status-btn.absent {
            background: rgba(255, 80, 80, 0.2);
            color: #ff4d4d;
        }

        .remove-btn {
            background: transparent;
            color: #ff6b6b;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            transition: transform 0.2s;
        }

        .remove-btn:hover {
            transform: scale(1.2);
            color: #ff4d4d;
        }

        .attendance-save-btn {
            margin-top: 1.5rem;
            width: auto;
            float: right;
        }


        /* ATTENDANCE REPORT MODAL & STYLES */
        .student-name {
            color: var(--lavender-main);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.2s;
            text-decoration: none;
        }

        .student-name:hover {
            text-decoration: underline;
            color: var(--primary-accent);
            text-shadow: 0 0 10px rgba(167, 139, 250, 0.3);
        }

        .modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            -webkit-backdrop-filter: blur(8px);
            backdrop-filter: blur(8px);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-card {
            background: #1c1c2b;
            border: 1px solid var(--card-border);
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 380px;
            color: white;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.6);
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .modal-overlay.active .modal-card {
            transform: scale(1) translateY(0);
        }

        .modal-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .modal-header h2 {
            font-size: 1.4rem;
            margin-bottom: 0.2rem;
            color: white;
        }

        .modal-header p {
            color: var(--text-body);
            font-size: 0.9rem;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1rem;
            padding-bottom: 0.8rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            font-size: 0.95rem;
        }

        .stat-row:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
        }

        .stat-label {
            color: #9ca3af;
        }

        .stat-val {
            font-weight: 600;
            color: white;
        }

        .progress-container {
            margin: 1.5rem 0 0.5rem 0;
            background: rgba(255, 255, 255, 0.1);
            height: 10px;
            width: 100%;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            border-radius: 10px;
            transition: width 1s ease, background 0.3s ease;
        }

        .percent-display {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, #fff 50%, #a78bfa 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .modal-btn-close {
            width: 100%;
            padding: 0.8rem;
            border-radius: 12px;
            border: 1px solid var(--card-border);
            background: rgba(255, 255, 255, 0.05);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: 0.2s;
        }

        .modal-btn-close:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.2);
        }

        /* Forgot Password Modal */
        #forgotModal {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #forgotModal.hidden {
            display: none;
        }

        #forgotModal .modal-content {
            background: #1e1e2e;
            padding: 2rem;
            border-radius: 12px;
            width: 320px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            color: white;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        #forgotModal input {
            width: 100%;
            padding: 0.8rem;
            margin: 0.2rem 0;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
            color: white;
        }

        #forgotModal button {
            margin-top: 0.5rem;
            width: 100%;
            padding: 0.8rem;
            border-radius: 6px;
            cursor: pointer;
            border: none;
            font-weight: bold;
        }

        #forgotModal .btn-reset {
            background: #6366f1;
            color: white;
            transition: background 0.2s;
        }

        #forgotModal .btn-reset:hover {
            background: #4f46e5;
        }

        #forgotModal .btn-cancel {
            background: transparent;
            color: #9ca3af;
            margin-top: 0;
        }

        #forgotModal .btn-cancel:hover {
            color: white;
        }

        .fp-modal-title {
            margin: 0 0 0.5rem 0;
        }

        .fp-modal-subtitle {
            font-size: 0.85rem;
            color: #9ca3af;
            margin-bottom: 1rem;
        }

        .fp-modal-message {
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: #fbbf24;
            min-height: 1.2em;
        }